(this["webpackJsonpmi-new-aeroset"]=this["webpackJsonpmi-new-aeroset"]||[]).push([[0],{60:function(t,e,i){t.exports=i(77)},65:function(t,e,i){},66:function(t,e,i){t.exports=i.p+"static/media/logo.5d5d9eef.svg"},67:function(t,e,i){},77:function(t,e,i){"use strict";i.r(e);var n=i(0),r=i.n(n),o=i(9),a=i.n(o),s=(i(65),i(66),i(67),i(43)),l=i(11),c=i.n(l),m=i(21),u=i(44),f=i(45),h=i(53),p=i(52),d=i(34),L=i(3),v=i(47),w=i(113),g=i(51),b=i(109),y=i(46),T=i.n(y),F=i(112),x=i(114),C=i(115);function k(){var t=Object(s.a)(["\n padding: 1em;\n background: ",";\n width: 250px; \n height: 320px;\n position: absolute;\n "]);return k=function(){return t},t}var E=Object(g.a)({palette:{primary:{light:"#757ce8",main:"#3f50b5",dark:"#002884",contrastText:"#fff"},secondary:{light:"#ff7961",main:"#f44336",dark:"#ba000d",contrastText:"#000"}}});function Z(t){for(var e=t.length,i=0,n=0,r=125e3,o=0,a=0;;){var s=t.slice(n,r),l=Math.min.apply(Math,Object(d.a)(s)),c=Math.max.apply(Math,Object(d.a)(s));if(o=l<o?l:o,a=c>a?c:a,n+=125e3,r+=125e3,(i+=s.length)>=e)break}return{min:o,max:a}}var O=function(t){Object(h.a)(i,t);var e=Object(p.a)(i);function i(t){var n;return Object(u.a)(this,i),(n=e.call(this,t)).showFile=function(){var t=Object(m.a)(c.a.mark((function t(e){var i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),(i=new FileReader).onload=function(){var t=Object(m.a)(c.a.mark((function t(e){var i,r,o,a,s,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=[],r=e.target.result,r.split("\n").forEach((function(t){var e=t.split(";");i.push(e)})),n.points=i.map((function(t){return{x:Number.parseFloat(t[0]?t[0].replace(",","."):0),y:Number.parseFloat(t[1]?t[1].replace(",","."):0),z:Number.parseFloat(t[2]?t[2].replace(",","."):0),p:new Number(t[3]?t[3].replace(",","."):0)}})),o=n.points.map((function(t){return t.p})),a=Z(o),s=a.max,l=a.min,n.parameterMin=l,n.parameterMax=s,t.next=11,n.SetupPcs(n.points);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i.readAsText(e.target.files[0]);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.state={filterXFromLimit:-5,filterXToLimit:5,filterYFromLimit:-5,filterYToLimit:5,filterZFromLimit:-5,filterZToLimit:5},n}return Object(f.a)(i,[{key:"SetupScene",value:function(){var t=new L.Engine(this.canvas,!0);this.scene=new L.Scene(this.engine),this.scene.clearColor=new L.Color3(27/255,150/255,243/255),this.engine=t}},{key:"SetupCamera",value:function(){var t=this;this.camera=new L.ArcRotateCamera("Camera",0,0,-100,new L.Vector3(1,2,-3),this.scene),M(this.camera,this.canvas),this.scene.activeCamera.attachControl(this.canvas,!1),this.scene.activeCamera.alpha+=Math.PI,this.totalZoom=0,this.scene.onPointerObservable.add((function(e){var i=e.event,n=.9*Math.max(-1,Math.min(1,i.wheelDelta||-i.detail||i.deltaY));(n>0&&t.totalZoom<14||n<0)&&(t.totalZoom+=n,X(t.camera,n))}),L.PointerEventTypes.POINTERWHEEL),this.scene.onPointerObservable.add((function(){Y=L.Vector3.Unproject(new L.Vector3(t.scene.pointerX,t.scene.pointerY,0),t.engine.getRenderWidth(),t.engine.getRenderHeight(),t.camera.getWorldMatrix(),t.camera.getViewMatrix(),t.camera.getProjectionMatrix())}),L.PointerEventTypes.POINTERMOVE),this.camera.lowerRadiusLimit=this.camera.radius,this.camera.upperRadiusLimit=this.camera.radius,this.camera.attachControl(this.canvas,!0,!1,0),this.camera.mode=L.Camera.ORTHOGRAPHIC_CAMERA,new L.HemisphericLight("light",new L.Vector3(0,1,0),this.scene).intensity=.7}},{key:"componentDidMount",value:function(){var t=Object(m.a)(c.a.mark((function t(){var e=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.SetupScene(),this.SetupCamera(),this.ShowAxis(5),this.engine.runRenderLoop((function(){e.scene.render()})),window.addEventListener("resize",(function(){e.engine.resize()}));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"ShowAxis",value:function(t){var e=function(t,e,i,n){var r=new L.DynamicTexture("DynamicTexture",50,n,!0);r.hasAlpha=!0,r.drawText(t,5,40,"bold 36px Arial",e,"transparent",!0);var o=new L.Mesh.CreatePlane("TextPlane",i,n,!0);return o.material=new L.StandardMaterial("TextPlaneMaterial",n),o.material.backFaceCulling=!1,o.material.specularColor=new L.Color3(0,0,0),o.material.diffuseTexture=r,o};L.Mesh.CreateLines("axisX",[new L.Vector3.Zero,new L.Vector3(t,0,0),new L.Vector3(.95*t,.05*t,0),new L.Vector3(t,0,0),new L.Vector3(.95*t,-.05*t,0)],this.scene).color=new L.Color3(1,0,0),e("X","red",t/10,this.scene).position=new L.Vector3(.9*t,-.05*t,0),L.Mesh.CreateLines("axisY",[new L.Vector3.Zero,new L.Vector3(0,t,0),new L.Vector3(-.05*t,.95*t,0),new L.Vector3(0,t,0),new L.Vector3(.05*t,.95*t,0)],this.scene).color=new L.Color3(0,1,0),e("Y","green",t/10,this.scene).position=new L.Vector3(0,.9*t,-.05*t),L.Mesh.CreateLines("axisZ",[new L.Vector3.Zero,new L.Vector3(0,0,t),new L.Vector3(0,-.05*t,.95*t),new L.Vector3(0,0,t),new L.Vector3(0,.05*t,.95*t)],this.scene).color=new L.Color3(0,0,1),e("Z","blue",t/10,this.scene).position=new L.Vector3(0,.05*t,.9*t)}},{key:"SetupPcs",value:function(){var t=Object(m.a)(c.a.mark((function t(e){var i,n,r,o=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.pointsCloudSystem=new L.PointsCloudSystem("pcs",this.scene),i=this.parameterMax-this.parameterMin,n=e.filter((function(t){var e=t.x,i=t.y,n=t.z;return e>=o.state.filterXFromLimit&&e<=o.state.filterXToLimit&&i>=o.state.filterYFromLimit&&i<=o.state.filterYToLimit&&n>=o.state.filterZFromLimit&&n<=o.state.filterZToLimit})),r=function(t,e,r){var a,s,l,c=n[e],m=(c.p-o.parameterMin)/i*100;m<=0?(a=0,s=0,l=0):m>0&&m<=25?(a=255,s=0-10.2*(0-m),l=0):m>25&&m<=50?(a=255- -10.2*(25-m),s=255,l=0):m>50&&m<=75?(a=0,s=255,l=0-5.1*(50-m)):m>75&&m<=100?(a=0,s=255- -10.2*(75-m),l=255):m>100&&(a=0,s=0,l=0),t.position=new L.Vector3(c.x,c.y,c.z),t.color=new L.Color3(a/255,s/255,l/255)},this.pointsCloudSystem.addPoints(n.length,r),t.next=7,this.pointsCloudSystem.buildMeshAsync();case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){}},{key:"InputOnChangeHandle",value:function(t){var e=this,i=t.target,n=i.name,r=i.value,o=function(){var t=Object(m.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e.pointsCloudSystem&&e.pointsCloudSystem.dispose(),"undefined"===typeof e.points||!e.points){t.next=4;break}return t.next=4,e.SetupPcs(e.points);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();"x-from"===n?this.setState((function(t){return{filterXFromLimit:r,filterXToLimit:t.filterXToLimit,filterYFromLimit:t.filterYFromLimit,filterYToLimit:t.filterYToLimit,filterZFromLimit:t.filterZFromLimit,filterZToLimit:t.filterZToLimit}}),(function(){o()})):"x-to"===n?this.setState((function(t){return{filterXFromLimit:t.filterXFromLimit,filterXToLimit:r,filterYFromLimit:t.filterYFromLimit,filterYToLimit:t.filterYToLimit,filterZFromLimit:t.filterZFromLimit,filterZToLimit:t.filterZToLimit}}),(function(){o()})):"y-from"===n?this.setState((function(t){return{filterXFromLimit:t.filterXFromLimit,filterXToLimit:t.filterXToLimit,filterYFromLimit:r,filterYToLimit:t.filterYToLimit,filterZFromLimit:t.filterZFromLimit,filterZToLimit:t.filterZToLimit}}),(function(){o()})):"y-to"===n?this.setState((function(t){return{filterXFromLimit:t.filterXFromLimit,filterXToLimit:t.filterXToLimit,filterYFromLimit:t.filterYFromLimit,filterYToLimit:r,filterZFromLimit:t.filterZFromLimit,filterZToLimit:t.filterZToLimit}}),(function(){o()})):"z-from"===n?this.setState((function(t){return{filterXFromLimit:t.filterXFromLimit,filterXToLimit:t.filterXToLimit,filterYFromLimit:t.filterYFromLimit,filterYToLimit:t.filterYToLimit,filterZFromLimit:r,filterZToLimit:t.filterZToLimit}}),(function(){o()})):"z-to"===n&&this.setState((function(t){return{filterXFromLimit:t.filterXFromLimit,filterXToLimit:t.filterXToLimit,filterYFromLimit:t.filterYFromLimit,filterYToLimit:t.filterYToLimit,filterZFromLimit:t.filterZFromLimit,filterZToLimit:r}}),(function(){o()}))}},{key:"render",value:function(){var t=this;return r.a.createElement(b.a,{theme:E},r.a.createElement("div",null,r.a.createElement("canvas",{style:{width:window.innerWidth,height:window.innerHeight,position:"relative"},ref:function(e){null!=e&&(t.canvas=e)}}),r.a.createElement(P,{style:{top:20,left:20}},r.a.createElement(C.a,{disableElevation:!0,variant:"outlined",startIcon:r.a.createElement(T.a,null),style:{marginBottom:24},component:"label",color:"primary"},"Upload File",r.a.createElement("input",{type:"file",ref:function(e){return t.inputElement=e},onChange:function(e){return t.showFile(e)},style:{display:"none"}})),r.a.createElement(F.a,{variant:"h5"},"FILTERS"),r.a.createElement("div",{style:{marginTop:16}},r.a.createElement(x.a,{id:"outlined-number",label:"X FROM",type:"number",name:"x-from",step:"0.1",value:this.state.filterXFromLimit,onChange:this.InputOnChangeHandle.bind(this),style:{width:100,height:20},InputLabelProps:{shrink:!0},inputProps:{step:.1},variant:"outlined"}),r.a.createElement(x.a,{id:"outlined-number",label:"X TO",type:"number",name:"x-to",step:"0.1",value:this.state.filterXToLimit,onChange:this.InputOnChangeHandle.bind(this),style:{width:100,marginLeft:24},InputLabelProps:{shrink:!0},inputProps:{step:.1},variant:"outlined"})),r.a.createElement("div",{style:{marginTop:12}},r.a.createElement(x.a,{id:"outlined-number",label:"Y FROM",type:"number",name:"y-from",step:"0.1",value:this.state.filterYFromLimit,onChange:this.InputOnChangeHandle.bind(this),style:{width:100,height:20},InputLabelProps:{shrink:!0},inputProps:{step:.1},variant:"outlined"}),r.a.createElement(x.a,{id:"outlined-number",label:"Y TO",type:"number",name:"y-to",step:"0.1",value:this.state.filterYToLimit,onChange:this.InputOnChangeHandle.bind(this),style:{width:100,marginLeft:24},InputLabelProps:{shrink:!0},inputProps:{step:.1},variant:"outlined"})),r.a.createElement("div",{style:{marginTop:12}},r.a.createElement(x.a,{id:"outlined-number",label:"Z FROM",type:"number",name:"z-from",step:"0.1",value:this.state.filterZFromLimit,onChange:this.InputOnChangeHandle.bind(this),style:{width:100,height:20},InputLabelProps:{shrink:!0},inputProps:{step:.1},variant:"outlined"}),r.a.createElement(x.a,{id:"outlined-number",label:"Z TO",type:"number",name:"z-to",step:"0.1",value:this.state.filterZToLimit,onChange:this.InputOnChangeHandle.bind(this),style:{width:100,marginLeft:24},InputLabelProps:{shrink:!0},inputProps:{step:.1},variant:"outlined"})))))}}]),i}(n.Component);var Y=null,X=function(){var t=Object(m.a)(c.a.mark((function t(e,i){var n,r,o,a,s,l,m,u,f,h,p;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i<0,Y&&(n=Math.abs(e.orthoLeft-e.orthoRight),r=Math.abs(e.orthoTop-e.orthoBottom),o=r/n,a=e.orthoLeft-Y.x,s=a/n,e.orthoLeft-=s*i,l=e.orthoRight-Y.x,m=l/n,e.orthoRight-=m*i,u=e.orthoTop-Y.y,f=u/r,e.orthoTop-=f*i*o,h=e.orthoBottom-Y.y,p=h/r,e.orthoBottom-=p*i*o,e.panningSensibility=6250/Math.abs(n/2));case 2:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),M=function(t,e){t.setPosition(new L.Vector3(0,0,-100)),t.target=new L.Vector3(0,0,0),t.orthoLeft=-8,t.orthoRight=8,function(t,e){var i=e.height/e.width;t.orthoTop=t.orthoRight*i,t.orthoBottom=t.orthoLeft*i}(t,e)},P=Object(v.a)(w.a)(k(),E.palette.background),S=O;var V=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(S,null))},R=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function I(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var i=t.installing;null!=i&&(i.onstatechange=function(){"installed"===i.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}i(76);a.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");R?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(i){var n=i.headers.get("content-type");404===i.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):I(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):I(e,t)}))}}()}},[[60,1,2]]]);
//# sourceMappingURL=main.965e3a1c.chunk.js.map