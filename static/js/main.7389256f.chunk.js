(this["webpackJsonpmi-new-aeroset"]=this["webpackJsonpmi-new-aeroset"]||[]).push([[0],{338:function(e){e.exports=JSON.parse('{"a":29}')},363:function(e,t,n){e.exports=n(453).wrap(n(447)()),e.exports.__esModule=!0},447:function(e,t,n){e.exports=function(){return new Worker(n.p+"fc6c60548292b1cb879f.worker.js")}},452:function(e,t,n){"use strict";n.r(t);var r=n(12),i=n(4),a=n.n(i),c=n(58),o=n.n(c),s=n(151),l=n(233),u=n(330);s.a.use(u.a).use(l.e).init({fallbackLng:"en",initImmediate:!1,lng:"ru",debug:!0,interpolation:{escapeValue:!1}});s.a;var d=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function b(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(389);var h,j,p=n(65),f=n(187),m=n(92),O=n(59),v=n(46),x=Object(O.c)({name:"pointCloudSectionReducer",initialState:{isActive:!0,pointsCloudFile:null},reducers:{pointCloudLoadFile:function(e,t){return Object(v.b)(e,(function(e){e.pointsCloudFile=t.payload}))}}}),g=x.actions,y=x.reducer,w=g.pointCloudLoadFile,_=y,C=Object(O.c)({name:"schemeSectionReducer",initialState:{isActive:!0,schemeFile:null,schemeFileLoadError:null},reducers:{schemeLoadFile:function(e,t){return Object(v.b)(e,(function(e){}))},schemeFileLoadError:function(e,t){return Object(v.b)(e,(function(e){e.schemeFileLoadError=t.payload}))}}}),k=C.actions,S=C.reducer,I=k.schemeLoadFile,M=k.schemeFileLoadError,P=S,T=function(){return Object(m.c)({pointCloud:_,activeScheme:P})},A=Object(O.c)({name:"pointCloudPanelReducer",initialState:{isActive:!1,filterXFromLimit:-100,filterXToLimit:100,filterYFromLimit:-100,filterYToLimit:100,filterZFromLimit:-100,filterZToLimit:100},reducers:{changeXFromLimit:function(e,t){return Object(v.b)(e,(function(e){e.filterXFromLimit=t.payload}))},changeXToLimit:function(e,t){return Object(v.b)(e,(function(e){e.filterXToLimit=t.payload}))},changeYFromLimit:function(e,t){return Object(v.b)(e,(function(e){e.filterYFromLimit=t.payload}))},changeYToLimit:function(e,t){return Object(v.b)(e,(function(e){e.filterYToLimit=t.payload}))},changeZFromLimit:function(e,t){return Object(v.b)(e,(function(e){e.filterZFromLimit=t.payload}))},changeZToLimit:function(e,t){return Object(v.b)(e,(function(e){e.filterZToLimit=t.payload}))},showPointCloudPanel:function(e){return Object(v.b)(e,(function(e){e.isActive=!0}))},closePointCloudPanel:function(e){return Object(v.b)(e,(function(e){e.isActive=!1}))}}}),L=function(e){return e.ui.panels.pointCloud.isActive},N=function(e){return e.ui.panels.pointCloud},z=A.actions,E=A.reducer,R=z.changeXFromLimit,G=z.changeXToLimit,B=z.changeYFromLimit,F=z.changeYToLimit,D=z.changeZFromLimit,V=z.changeZToLimit,U=z.showPointCloudPanel,W=z.closePointCloudPanel,H=E,Y=Object(O.c)({name:"schemePanelReducer",initialState:{isActive:!1,schemeFile:null},reducers:{showSchemePanel:function(e){return Object(v.b)(e,(function(e){e.isActive=!0}))},closeSchemePanel:function(e){return Object(v.b)(e,(function(e){e.isActive=!1}))}}}),X=function(e){return e.ui.panels.activeScheme.isActive},Z=Y.actions,K=Y.reducer,q=Z.showSchemePanel,J=Z.closeSchemePanel,$=K;!function(e){e[e.Default=0]="Default",e[e.Iron=1]="Iron",e[e.Aeroset=2]="Aeroset"}(h||(h={})),function(e){e[e.Air=0]="Air",e[e.Pressure=1]="Pressure",e[e.None=2]="None"}(j||(j={}));var Q,ee={isActive:!1,gradient:h.Default,activeModel:j.None},te=Object(O.c)({name:"schemeModelsReducer",initialState:ee,reducers:{showSchemeModelsPanel:function(e){return Object(v.b)(e,(function(e){e.isActive=!0}))},colorGradientChanged:function(e,t){return Object(v.b)(e,(function(e){e.gradient=t.payload}))},setActiveModel:function(e,t){return Object(v.b)(e,(function(e){e.activeModel=t.payload}))},closeSchemeModelsPanel:function(e){return Object(v.b)(e,(function(e){e.isActive=!1}))}}}),ne=function(e){return e.ui.panels.schemeModels.isActive},re=function(e){return e.ui.panels.schemeModels.gradient},ie=function(e){return e.ui.panels.schemeModels.activeModel},ae=te.actions,ce=te.reducer,oe=ae.showSchemeModelsPanel,se=ae.closeSchemeModelsPanel,le=ae.colorGradientChanged,ue=ae.setActiveModel,de=ce,be=function(){return Object(m.c)({pointCloud:H,activeScheme:$,schemeModels:de})};!function(e){e[e.Perspective=0]="Perspective",e[e.Orthographic=1]="Orthographic"}(Q||(Q={}));var he={target:{x:0,y:0,z:0},mode:Q.Orthographic},je=Object(O.c)({name:"cameraReducer",initialState:he,reducers:{cameraTargetChanged:function(e,t){return Object(v.b)(e,(function(e){e.target=t.payload}))},cameraModeChanged:function(e,t){return Object(v.b)(e,(function(e){e.mode=t.payload}))}}}),pe=function(e){return e.ui.camera.target},fe=function(e){return e.ui.camera.mode},me=je.actions,Oe=je.reducer,ve=me.cameraTargetChanged,xe=me.cameraModeChanged,ge=Oe,ye=Object(O.c)({name:"sceneReducer",initialState:{isTargetAxisVisible:!1},reducers:{setTargetAxisVisibility:function(e,t){return Object(v.b)(e,(function(e){e.isTargetAxisVisible=t.payload}))}}}),we=function(e){return e.ui.scene.isTargetAxisVisible},_e=ye.actions,Ce=ye.reducer,ke=_e.setTargetAxisVisibility,Se=Ce,Ie=function(){return Object(m.c)({sections:T(),panels:be(),camera:ge,scene:Se})},Me=Object(O.b)({selectId:function(e){return e.id},sortComparer:function(e,t){return e.updated<t.updated?-1:1}}),Pe=Object(O.c)({name:"airModelsReducer",initialState:Me.getInitialState({loading:"idle"}),reducers:{airModelsAddOne:Me.addOne,airModelsAddMany:Me.addMany,airModelsUpdate:Me.updateOne,airModelsRemove:Me.removeOne}}),Te=Me.getSelectors(),Ae=Te.selectById,Le=(Te.selectAll,Pe.actions),Ne=Pe.reducer,ze=(Le.airModelsAddOne,Le.airModelsAddMany,Le.airModelsUpdate,Le.airModelsRemove,Ne),Ee=Object(O.b)({selectId:function(e){return e.id},sortComparer:function(e,t){return e.updated<t.updated?-1:1}}),Re=Object(O.c)({name:"pressureModelsReducer",initialState:Ee.getInitialState({loading:"idle"}),reducers:{pressureModelsAddOne:Ee.addOne,pressureModelsAddMany:Ee.addMany,pressureModelsUpdate:Ee.updateOne,pressureModelsRemove:Ee.removeOne}}),Ge=Ee.getSelectors(),Be=Ge.selectById,Fe=Ge.selectAll,De=Re.actions,Ve=Re.reducer,Ue=De.pressureModelsAddOne,We=(De.pressureModelsAddMany,De.pressureModelsUpdate,De.pressureModelsRemove,Ve),He=function(){return Object(m.c)({air:ze,pressure:We})},Ye=Object(O.b)({selectId:function(e){return e.id},sortComparer:function(e,t){return e.updated<t.updated?-1:1}}),Xe=Object(O.c)({name:"schemesReducer",initialState:Ye.getInitialState({loading:"idle"}),reducers:{schemesAddOne:Ye.addOne,schemesAddMany:Ye.addMany,schemesUpdate:Ye.updateOne,schemesRemove:Ye.removeOne}}),Ze=Ye.getSelectors().selectById,Ke=Xe.actions,qe=Xe.reducer,Je=Ke.schemesAddOne,$e=(Ke.schemesAddMany,Ke.schemesUpdate,Ke.schemesRemove,qe),Qe=function(){return Object(m.c)({schemes:$e,models:He()})},et=n(251),tt=Object(O.c)({name:"activeSchemeReducer",initialState:{activeSchemeId:null,activeSchemeUI:null,activeSchemeMode:0,activeModelId:null,activeScaleFactor:{x:1,y:1,z:1},isSchemeLoading:!1},reducers:{setActiveModelId:function(e,t){return Object(v.b)(e,(function(e){e.activeModelId=t.payload}))},setActiveScaleFactor:function(e,t){return Object(v.b)(e,(function(e){e.activeScaleFactor=t.payload}))},activeSchemeIdChanged:function(e,t){return Object(v.b)(e,(function(e){e.activeSchemeId=t.payload}))},activeSchemeUIChanged:function(e,t){return Object(v.b)(e,(function(e){e.activeSchemeUI=t.payload}))},activeSchemeUIUpdated:function(e,t){return Object(v.b)(e,(function(e){e.activeSchemeUI=t.payload}))},schemeModeChanged:function(e,t){return Object(v.b)(e,(function(e){e.activeSchemeMode=t.payload}))},isSchemeLoading:function(e,t){return Object(v.b)(e,(function(e){e.isSchemeLoading=t.payload}))}}}),nt=(Object(et.a)([function(e){return e.domain.activeScheme.activeSchemeId}],(function(e){var t=cr.getState().entity.schemes;return Ze(t,e)})),function(e){return e.domain.activeScheme.activeSchemeMode}),rt=(Object(et.a)([function(e){return e.domain.activeScheme.activeModelId}],(function(e){var t=cr.getState().entity.models.air;return{model:Ae(t,e)}})),tt.actions),it=tt.reducer,at=rt.activeSchemeIdChanged,ct=rt.schemeModeChanged,ot=rt.isSchemeLoading,st=rt.activeSchemeUIChanged,lt=rt.setActiveModelId,ut=rt.setActiveScaleFactor,dt=rt.activeSchemeUIUpdated,bt=it,ht=function(){return Object(m.c)({activeScheme:bt})};n(336);var jt=n(367),pt=n(41),ft=n.n(pt),mt=n(48);function Ot(e){return Object(mt.d)(e)}var vt=n(91),xt=function(e){if(e){var t,n=Object(vt.a)(e.nodes);try{for(n.s();!(t=n.n()).done;){t.value.mesh.dispose()}}catch(a){n.e(a)}finally{n.f()}var r,i=Object(vt.a)(e.ribs);try{for(i.s();!(r=i.n()).done;){r.value.mesh.dispose()}}catch(a){i.e(a)}finally{i.f()}e.parent.dispose()}},gt=ft.a.mark(yt);function yt(e){var t;return ft.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.payload){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,Ot((function(e){return e.domain.activeScheme.activeSchemeUI}));case 5:(t=n.sent)&&xt(t);case 7:case"end":return n.stop()}}),gt)}var wt=function(e){return e.replace(/\n/g,"").replace(/\r/g,"").replace(/\t/g,"")};var _t=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){var e,n,i,a=r.result,c=wt(a),o=JSON.parse(c),s=new Array,l=Object(vt.a)(o.nodes);try{for(l.s();!(e=l.n()).done;){var u=e.value,d=(n=1,i=10,Math.floor(Math.random()*(i-n+1)+n));s.push({nodeId:u.id,value:d})}}catch(h){l.e(h)}finally{l.f()}var b={created:new Date,updated:new Date,id:"prs"+Object(O.e)(),name:"AirModel",scheme:o,values:s,parameterMin:1,parameterMax:10};cr.dispatch(Ue(b)),t(o)},r.onerror=n;var i=e;r.readAsText(i)}))},Ct=ft.a.mark(kt);function kt(e){var t,n;return ft.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.payload){r.next=3;break}return r.abrupt("return");case 3:return r.prev=3,r.next=6,Object(mt.b)(_t,t);case 6:return n=r.sent,r.next=9,Object(mt.c)(Je(n));case 9:return r.next=11,Object(mt.c)(at(n.id));case 11:r.next=17;break;case 13:return r.prev=13,r.t0=r.catch(3),r.next=17,Object(mt.c)(M(r.t0));case 17:case"end":return r.stop()}}),Ct,null,[[3,13]])}n(307);var St,It,Mt,Pt,Tt,At,Lt,Nt=n(86),zt=n(143),Et=n(142),Rt=n(337),Gt=n.n(Rt),Bt=Object(Et.injectable)()(St=function(){function e(){Object(Nt.a)(this,e),this.eventEmitter=new Gt.a.EventEmitter}return Object(zt.a)(e,[{key:"subscribe",value:function(e,t){this.eventEmitter.listeners(e).map((function(e){return e.name})).includes(t.name)||this.eventEmitter.addListener(e,t)}},{key:"unsubscribe",value:function(e,t){this.eventEmitter.removeListener(e,t)}},{key:"send",value:function(e,t){this.eventEmitter.emit(e,[t])}}]),e}())||St,Ft=Symbol.for("INFRASTRUCTURE_SERVICE"),Dt=Symbol.for("EVENT_BUS_SERVICE"),Vt=Symbol.for("VERSION_SERVICE"),Ut=Symbol.for("KEYBOARD_SERVICE"),Wt=Symbol.for("COLOR_GRADIENT_SERVICE"),Ht=n(106),Yt=n(338),Xt=n(292),Zt=n.n(Xt),Kt=Object(Et.injectable)()((Pt=Mt=function(){function e(){Object(Nt.a)(this,e),this.Initialize()}return Object(zt.a)(e,[{key:"Initialize",value:function(){var t=Object(Ht.a)(ft.a.mark((function t(){var n,r,i;return ft.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Zt()().year(),r=Zt()().month()+1,i=0,r<=3?i=1:r<=6?i=2:r<=9?i=3:r<=12&&(i=4),e._version="".concat(n,".").concat(i,".").concat(Yt.a);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"GetVersion",value:function(){return e._version}}]),e}(),Mt._version="None",It=Pt))||It,qt="SHOW_SNACKBAR_EVENT",Jt="SHOW_NEW_VERSION_EVENT",$t="CLOSE_DRAWER_EVENT",Qt="OPEN_BOTTOM_DRAWER_EVENT",en="SHOW_BACKDROP_EVENT",tn="CLOSE_BACKDROP_EVENT",nn="KEY_PRESSED_EVENT",rn="KEY_UNPRESSED_EVENT",an="CANVAS_MOUSE_CLICK_EVENT",cn=Object(Et.injectable)()(Tt=function(){function e(){Object(Nt.a)(this,e),this.initialize()}return Object(zt.a)(e,[{key:"initialize",value:function(){document.addEventListener("keydown",this.handleKeyDown,!1),document.addEventListener("keyup",this.handleKeyUp,!1)}},{key:"handleKeyDown",value:function(e){yn.get(Dt).send(nn,e.key)}},{key:"handleKeyUp",value:function(e){yn.get(Dt).send(rn,e.key)}}]),e}())||Tt,on=function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(Nt.a)(this,e),this.Red=void 0,this.Green=void 0,this.Blue=void 0,this.Alpha=void 0,this.CSSProperty=void 0,this.Red=t,this.Green=n,this.Blue=r,this.Alpha=i,this.CSSProperty="rgba("+t+","+n+","+r+","+i+") "},sn=n(114),ln=n(211),un=n(215),dn=n(124),bn=n(99),hn=function e(t,n){Object(Nt.a)(this,e),this.position=void 0,this.color=void 0,this.position=t,this.color=n},jn=function(){function e(){Object(Nt.a)(this,e),this._Name=void 0,this._BelowLimitColor=void 0,this._AboveLimitColor=void 0,this._Labels=void 0,this._Name="",this._BelowLimitColor=new on(0,0,0),this._AboveLimitColor=new on(0,0,0),this._Labels=[]}return Object(zt.a)(e,[{key:"Labels",get:function(){return this._Labels},set:function(e){this._Labels=e}},{key:"AboveLimitColor",get:function(){return this._AboveLimitColor},set:function(e){this._AboveLimitColor=e}},{key:"BelowLimitColor",get:function(){return this._BelowLimitColor},set:function(e){this._BelowLimitColor=e}},{key:"Name",get:function(){return this._Name},set:function(e){this._Name=e}}]),e}(),pn=function(e){Object(ln.a)(n,e);var t=Object(un.a)(n);function n(){var e,r,i,a,c;return Object(Nt.a)(this,n),c=t.call(this),Object(dn.a)((e=Object(sn.a)(c),Object(bn.a)(n.prototype)),"Name","Default",e,!0),Object(dn.a)((r=Object(sn.a)(c),Object(bn.a)(n.prototype)),"BelowLimitColor",new on(255,255,255),r,!0),Object(dn.a)((i=Object(sn.a)(c),Object(bn.a)(n.prototype)),"Labels",[new hn(0,new on(255,0,0)),new hn(25,new on(255,255,0)),new hn(50,new on(0,255,0)),new hn(75,new on(0,255,255)),new hn(100,new on(0,0,255))],i,!0),Object(dn.a)((a=Object(sn.a)(c),Object(bn.a)(n.prototype)),"AboveLimitColor",new on(0,0,0),a,!0),c}return n}(jn),fn=function(e){Object(ln.a)(n,e);var t=Object(un.a)(n);function n(){var e,r,i,a,c;return Object(Nt.a)(this,n),c=t.call(this),Object(dn.a)((e=Object(sn.a)(c),Object(bn.a)(n.prototype)),"Name","Iron",e,!0),Object(dn.a)((r=Object(sn.a)(c),Object(bn.a)(n.prototype)),"BelowLimitColor",new on(255,255,255),r,!0),Object(dn.a)((i=Object(sn.a)(c),Object(bn.a)(n.prototype)),"Labels",[new hn(0,new on(255,255,255)),new hn(15,new on(250,230,35)),new hn(30,new on(250,185,0)),new hn(50,new on(240,80,35)),new hn(67,new on(170,10,170)),new hn(90,new on(15,5,100)),new hn(100,new on(0,0,0))],i,!0),Object(dn.a)((a=Object(sn.a)(c),Object(bn.a)(n.prototype)),"AboveLimitColor",new on(0,0,0),a,!0),c}return n}(jn),mn=function(e){Object(ln.a)(n,e);var t=Object(un.a)(n);function n(){var e,r,i,a,c;return Object(Nt.a)(this,n),c=t.call(this),Object(dn.a)((e=Object(sn.a)(c),Object(bn.a)(n.prototype)),"Name","Aeroset",e,!0),Object(dn.a)((r=Object(sn.a)(c),Object(bn.a)(n.prototype)),"BelowLimitColor",new on(255,255,255),r,!0),Object(dn.a)((i=Object(sn.a)(c),Object(bn.a)(n.prototype)),"AboveLimitColor",new on(38,38,38),i,!0),Object(dn.a)((a=Object(sn.a)(c),Object(bn.a)(n.prototype)),"Labels",[new hn(0,new on(249,30,30)),new hn(10,new on(252,102,28)),new hn(30,new on(242,235,38)),new hn(50,new on(38,242,84)),new hn(70,new on(28,252,204)),new hn(90,new on(28,173,252)),new hn(100,new on(28,56,252))],a,!0),c}return n}(jn),On=Object(Et.injectable)()(At=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Default",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-100,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;Object(Nt.a)(this,e),this.gradientTypes=void 0,this.Gradient=new pn,this.MinParameter=1,this.MaxParameter=10,this.gradientTypes=[new pn,new fn,new mn],this.setGradient(t),this.setMinParameter(n),this.setMaxParameter(r)}return Object(zt.a)(e,[{key:"setGradient",value:function(e){this.Gradient=this.gradientTypes.find((function(t){return t.Name===e}))}},{key:"setMinParameter",value:function(e){this.MinParameter=e}},{key:"setMaxParameter",value:function(e){this.MaxParameter=e}},{key:"getColor",value:function(e){var t=(e-this.MinParameter)/(this.MaxParameter-this.MinParameter)*100;if(t<0)return this.Gradient.BelowLimitColor;if(t>100)return this.Gradient.AboveLimitColor;var n=this.Gradient.Labels.sort((function(e,t){return t.position-e.position})).find((function(e){return e.position<=t})),r=this.Gradient.Labels.sort((function(e,t){return e.position-t.position})).find((function(e){return e.position>=t}));if(n==r)return n.color;var i=Math.round(n.color.Red-(n.color.Red-r.color.Red)/(n.position-r.position)*(n.position-t)),a=Math.round(n.color.Green-(n.color.Green-r.color.Green)/(n.position-r.position)*(n.position-t)),c=Math.round(n.color.Blue-(n.color.Blue-r.color.Blue)/(n.position-r.position)*(n.position-t)),o=Math.round(n.color.Alpha-(n.color.Alpha-r.color.Alpha)/(n.position-r.position)*(n.position-t));return new on(i,a,c,o)}},{key:"getGradientAsCSSProperty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"to bottom",t="linear-gradient("+e+", ";for(var n in this.Gradient.Labels)t+=" rgba("+this.Gradient.Labels[n].color.Red+","+this.Gradient.Labels[n].color.Green+","+this.Gradient.Labels[n].color.Blue+","+this.Gradient.Labels[n].color.Alpha+") "+this.Gradient.Labels[n].position+"%, ";return t=t.slice(0,-2)+")"}}]),e}())||At,vn=Object(Et.injectable)()(Lt=function(){function e(){Object(Nt.a)(this,e),this._engine=void 0,this._scene=void 0,this._camera=void 0,this._light=void 0,this._resources=void 0}return Object(zt.a)(e,[{key:"resources",get:function(){return this._resources},set:function(e){this._resources=e}},{key:"light",get:function(){return this._light},set:function(e){this._light=e}},{key:"camera",get:function(){return this._camera},set:function(e){this._camera=e}},{key:"scene",get:function(){return this._scene},set:function(e){this._scene=e}},{key:"engine",get:function(){return this._engine},set:function(e){this._engine=e}}]),e}())||Lt,xn=new Et.Container({autoBindInjectable:!0,defaultScope:"Singleton",skipBaseClassChecks:!0});xn.bind(Dt).to(Bt).inSingletonScope(),xn.bind(Vt).to(Kt).inSingletonScope(),xn.bind(Ut).to(cn).inSingletonScope(),xn.bind(Wt).to(On).inSingletonScope(),xn.bind(Ft).to(vn).inSingletonScope();var gn,yn=xn,wn=n(33);!function(e){e[e.Topology=0]="Topology",e[e.RibGeometry=1]="RibGeometry"}(gn||(gn={}));var _n=function(e,t,n,r){var i=r.clone("sphere");return i.visibility=0,i},Cn=function(e,t,n,r){var i=r.clone("sphere node "+t);return i.visibility=1,i.freezeNormals(),i},kn=function(e,t,n,r){var i=wn.h.CreateTube("tube",[t,n],.02,null,null,3,e,!0,null,null);return i.freezeNormals(),i},Sn=function(e,t,n){var r=t,i=n,a=wn.r.Distance(r,i),c=wn.i.CreateBox("ribCuboid",{width:.1,height:a,depth:.1},e),o=wn.r.Lerp(r,i,.5);c.position=o;var s=i.subtract(r);s.normalize();var l=new wn.r(s.x,0,s.z);l.normalize();var u=new wn.r(1,0,0),d=new wn.r(0,1,0),b=(new wn.r(0,-1,0),Math.acos(wn.r.Dot(l,u))),h=wn.r.Cross(l,u);h.normalize();var j=Math.acos(wn.r.Dot(s,d)),p=wn.r.Cross(s,d);p.normalize();var f=wn.n.RotationAxis(p,-j),m=wn.n.RotationAxis(h,-b),O=wn.q.ToDegrees(j);return Math.abs(O)<2||Math.abs(O-180)<2?c.rotationQuaternion=m:c.rotationQuaternion=f.multiply(m),c},In=function(){var e=Object(Ht.a)(ft.a.mark((function e(t,n,r,i){var a,c,o,s,l,u,d,b,h,j,p;return ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new Array,c=new Array,o=new Array,s=new Array,e.t0=i,e.next=e.t0===gn.Topology?7:e.t0===gn.RibGeometry?10:13;break;case 7:return l=Cn,u=kn,e.abrupt("break",13);case 10:return l=_n,u=Sn,e.abrupt("break",13);case 13:d=yn.get(Ft),b=new wn.h("parent",n),h=Object(vt.a)(t.nodes);try{for(p=function(){var e=j.value,r=e.id.toString(),i=d.resources.materials.nodeMaterial,h=d.resources.baseMeshes.nodeBaseMesh,p=l(n,r,i,h);p.setParent(b),c.push({mesh:p,nodeId:r});var f=100;p.position.x=e.point.x/f,p.position.y=e.point.z/10,p.position.z=e.point.y/f;var m=e.linkedNodes.filter((function(e){return!s.includes(e)})),O=new Array,v=e.point,x=new wn.r(v.x/f,v.z/10,v.y/f);if(m.length>0){var g,y=Object(vt.a)(m);try{var w=function(){var e=g.value,i=t.nodes.find((function(t){return t.id===e}));if(!i)return"continue";var c=i.point,s=new wn.r(c.x/f,c.z/10,c.y/f),l=d.resources.materials.ribMaterial,b=u(n,x,s,l);o.push({node1Id:e,node2Id:r,mesh:b,node1Point:x,node2Point:s});var h={mesh:b,nodeVector:x,linkedNodeVector:s};a.push(h),O.push(h)};for(y.s();!(g=y.n()).done;)w()}catch(I){y.e(I)}finally{y.f()}var _,C=a.filter((function(e){return e.linkedNodeVector.x===x.x&&e.linkedNodeVector.y===x.y&&e.linkedNodeVector.z===x.z})),k=Object(vt.a)(C);try{for(k.s();!(_=k.n()).done;){var S=_.value;O.push({mesh:S.mesh,nodeVector:x,linkedNodeVector:S.nodeVector})}}catch(I){k.e(I)}finally{k.f()}p.metadata={linkedRibsMetadata:O},s.push(e.id)}},h.s();!(j=h.n()).done;)p()}catch(r){h.e(r)}finally{h.f()}return e.abrupt("return",{nodes:c,ribs:o,parent:b});case 18:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),Mn=function(e){return new Promise((function(t){return setTimeout(t,e)}))},Pn=function(e,t,n){for(var r=e.getChildMeshes(),i=r[0].getBoundingInfo().boundingBox.minimumWorld,a=r[0].getBoundingInfo().boundingBox.maximumWorld,c=0;c<r.length;c++){var o=r[c].getBoundingInfo().boundingBox.minimumWorld,s=r[c].getBoundingInfo().boundingBox.maximumWorld;i=wn.r.Minimize(i,o),a=wn.r.Maximize(a,s)}var l=new wn.b(i,a);e.setBoundingInfo(l),e.showBoundingBox=!0;var u=l.boundingBox.center;return t.setTarget(u),t.radius=n,{x:u.x,y:u.y,z:u.z}},Tn=ft.a.mark(An);function An(e,t){var n,r,i,a,c;return ft.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return n=yn.get(Ft),r=n.scene,i=n.camera,o.next=5,Object(mt.c)(ot(!0));case 5:return o.next=7,Object(mt.b)(In,e,r,i,t);case 7:return a=o.sent,o.next=10,Object(mt.b)(Mn,300);case 10:return c=Pn(a.parent,i,150),o.next=13,Object(mt.c)(ve(c));case 13:return o.next=15,Object(mt.c)(st(a));case 15:return o.next=17,Object(mt.c)(ot(!1));case 17:case"end":return o.stop()}}),Tn)}var Ln=ft.a.mark(Nn);function Nn(e){var t,n,r,i,a,c;return ft.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.payload){o.next=3;break}return o.abrupt("return");case 3:return n=cr.getState().entity.schemes,r=Ze(n,t),i=cr.getState().domain.activeScheme.activeSchemeMode,o.next=8,Object(mt.b)(An,r,i);case 8:a=yn.get(Dt),c={message:s.a.t("scheme_successfully_uploaded"),alertType:"success"},a.send(qt,c);case 11:case"end":return o.stop()}}),Ln)}var zn=ft.a.mark(En);function En(e){var t,n,r,i,a,c;return ft.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.payload,n=cr.getState().entity.schemes,r=cr.getState().domain.activeScheme.activeSchemeId){o.next=5;break}return o.abrupt("return");case 5:return i=Ze(n,r),o.next=8,Object(mt.b)(An,i,t);case 8:a=yn.get(Dt),c={message:s.a.t("scheme_mode_changed"),alertType:"success"},a.send(qt,c);case 11:case"end":return o.stop()}}),zn)}var Rn=function(){var e=Object(Ht.a)(ft.a.mark((function e(t,n,r,i){var a,c,o;return ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.unfreeze();try{a=Object(vt.a)(n.ribs);try{for(o=function(){var e=c.value,n=e.mesh,a=e.node1Id,o=e.node2Id,s=t.values.find((function(e){return e.nodeId===a})).value,l=t.values.find((function(e){return e.nodeId===o})).value;i.setMinParameter(t.parameterMin),i.setMaxParameter(t.parameterMax);var u=i.getColor(s),d=i.getColor(l),b=r.clone("ribId: "+e.node1Id+e.node2Id);b.topColor=new wn.d(u.Red/255,u.Green/255,u.Blue/255),b.bottomColor=new wn.d(d.Red/255,d.Green/255,d.Blue/255),b.offset=.5,b.smoothness=1,n.material=b},a.s();!(c=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}}finally{r.freeze()}case 2:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),Gn=n(230),Bn=n.n(Gn),Fn=function(e){return null==e?j.None:Bn.a.startsWith(e,"prs")?j.Pressure:Bn.a.startsWith(e,"air")?j.Air:j.None},Dn=function(){var e=Object(Ht.a)(ft.a.mark((function e(t,n,r,i){var a,c,o;return ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.unfreeze();try{a=Object(vt.a)(n.ribs);try{for(o=function(){var e=c.value,n=e.mesh,a=e.node1Id,o=e.node2Id,s=t.values.find((function(e){return e.nodeId===a})).value,l=t.values.find((function(e){return e.nodeId===o})).value;i.setMinParameter(t.parameterMin),i.setMaxParameter(t.parameterMax);var u=i.getColor(s),d=i.getColor(l),b=r.clone("ribId: "+e.node1Id+e.node2Id);b.topColor=new wn.d(u.Red/255,u.Green/255,u.Blue/255),b.bottomColor=new wn.d(d.Red/255,d.Green/255,d.Blue/255),b.offset=.5,b.smoothness=1,n.material=b},a.s();!(c=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}}finally{r.freeze()}case 2:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),Vn=function(e){var t,n=Object(vt.a)(e.ribs);try{for(n.s();!(t=n.n()).done;){var r=t.value.mesh.material;r&&r.dispose()}}catch(i){n.e(i)}finally{n.f()}},Un=ft.a.mark(Wn);function Wn(e){var t,n,r,i,a,c,o,s;return ft.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,l.next=3,Ot((function(e){return e.domain.activeScheme.activeSchemeUI}));case 3:if(n=l.sent){l.next=6;break}return l.abrupt("return");case 6:if(r=yn.get(Ft),r.scene,t){l.next=12;break}return l.next=11,Object(mt.b)(Vn,n);case 11:return l.abrupt("return");case 12:if(i=cr.getState().entity.models.pressure,a=Be(i,t)){l.next=16;break}return l.abrupt("return");case 16:c=yn.get(Wt),o=Fn(t),s=r.resources.materials.ribGradientMaterial,l.t0=o,l.next=l.t0===j.Air?22:l.t0===j.Pressure?25:28;break;case 22:return l.next=24,Object(mt.b)(Dn,a,n,s,c);case 24:return l.abrupt("break",28);case 25:return l.next=27,Object(mt.b)(Rn,a,n,s,c);case 27:return l.abrupt("break",28);case 28:case"end":return l.stop()}}),Un)}var Hn=ft.a.mark(Yn);function Yn(e){var t,n;return ft.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,yn.get(Wt).setGradient(h[t]),n=cr.getState().domain.activeScheme.activeModelId,r.next=6,Object(mt.b)(Wn,{payload:n});case 6:case"end":return r.stop()}}),Hn)}var Xn=ft.a.mark(Zn);function Zn(e){var t;return ft.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=e.payload,n.t0=t,n.next=n.t0===gn.Topology?4:n.t0===gn.RibGeometry?11:12;break;case 4:return n.next=6,Object(mt.c)(se());case 6:return n.next=8,Object(mt.c)(lt(null));case 8:return n.next=10,Object(mt.c)(ue(j.None));case 10:case 11:return n.abrupt("break",12);case 12:case"end":return n.stop()}}),Xn)}var Kn=function(e,t,n){var r,i=t.x,a=t.y,c=t.z,o=Object(vt.a)(e.ribs);try{for(o.s();!(r=o.n()).done;){var s=r.value,l=s.mesh,u=s.node1Point,d=s.node2Point,b=1,h=1,j=1;l.metadata&&l.metadata.scale&&(b=l.metadata.scale.sx,h=l.metadata.scale.sy,j=l.metadata.scale.sz);var p=i/b,f=a/h,m=c/j,O=n,v=new wn.r(O.x+p*(u.x-O.x),O.y+f*(u.y-O.y),O.z+m*(u.z-O.z)),x=new wn.r(O.x+p*(d.x-O.x),O.y+f*(d.y-O.y),O.z+m*(d.z-O.z));l.unfreezeNormals();wn.h.CreateTube(null,[v,x],.02,null,null,null,null,!0,null,l);s.mesh.freezeNormals();var g={sx:b,sy:h,sz:j};l.metadata?l.metadata.scale=g:l.metadata={scale:g},s.mesh.computeWorldMatrix()}}catch(L){o.e(L)}finally{o.f()}var y,w=Object(vt.a)(e.nodes);try{for(w.s();!(y=w.n()).done;){var _=y.value.mesh,C=1,k=1,S=1;_.metadata&&_.metadata.scale&&(C=_.metadata.scale.sx,k=_.metadata.scale.sy,S=_.metadata.scale.sz);var I=i/C,M=a/k,P=c/S,T=n;_.position=new wn.r(T.x+I*(_.position.x-T.x),T.y+M*(_.position.y-T.y),T.z+P*(_.position.z-T.z));var A={sx:C,sy:k,sz:S};_.metadata?_.metadata.scale=A:_.metadata={scale:A},_.computeWorldMatrix()}}catch(L){w.e(L)}finally{w.f()}return null},qn=ft.a.mark(Jn);function Jn(e){var t,n,r,i;return ft.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.next=3,Ot((function(e){return e.domain.activeScheme.activeSchemeUI}));case 3:if(!(n=a.sent)){a.next=11;break}return a.next=7,Ot((function(e){return e.ui.camera.target}));case 7:return r=a.sent,i=Kn(n,t,r),a.next=11,Object(mt.c)(dt(i));case 11:case"end":return a.stop()}}),qn)}var $n=ft.a.mark(Qn);function Qn(){return ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(mt.e)(le,Yn);case 2:return e.next=4,Object(mt.f)(ot,yt);case 4:return e.next=6,Object(mt.f)(at,Nn);case 6:return e.next=8,Object(mt.f)(ct,En);case 8:return e.next=10,Object(mt.e)(ct,Zn);case 10:return e.next=12,Object(mt.e)(I,kt);case 12:return e.next=14,Object(mt.f)(lt,Wn);case 14:return e.next=16,Object(mt.f)(ut,Jn);case 16:case"end":return e.stop()}}),$n)}var er=ft.a.mark(tr);function tr(){return ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(mt.a)([Qn()]);case 2:case"end":return e.stop()}}),er)}var nr=ft.a.mark(rr);function rr(){return ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(mt.a)([tr()]);case 2:case"end":return e.stop()}}),nr)}var ir=Object(jt.a)(),ar=[].concat(Object(f.a)(Object(O.d)({thunk:!1,serializableCheck:!1,immutableCheck:!1})),[ir]);window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||m.d;var cr=Object(O.a)({reducer:Object(m.c)({ui:Ie(),entity:Qe(),domain:ht()}),preloadedState:{},middleware:ar,devTools:false});ir.run(rr);var or=function(){return Object(p.b)()},sr=n(339),lr=n(24),ur=n(340);function dr(){var e=Object(sr.a)(["\n  ",";\n  \n   html, body {\n    padding: 0;\n    margin: 0;\n    height: 100%;\n    min-height: 100%;\n    min-width: 100%;\n    width: 100%;\n    font-family: 'Roboto', 'Segoe UI',sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    overflow:hidden;\n    box-sizing: border-box;\n    *, *:before, *:after {\n    box-sizing: inherit;\n    touch-action: none;\n    -ms-touch-action: none;\n    }\n  }\n\n  code {\n    font-family: source-code-pro, monospace;\n  }\n"]);return dr=function(){return e},e}var br=Object(lr.createGlobalStyle)(dr(),ur.normalize),hr=n(247),jr=n(491),pr=n(122),fr=n(366),mr={app:{colors:{main:{white:"#ffffff",lightGray:"#f7f7f7",lightGraySecond:"#D3D3D3",mediumGray:"#969696",darkGray:"#363835",lightBlue:"#bee7f1",mediumBlue:"#7dd0e4",darkBlue:"#137cbf",lightGreen:""},palette:{white:"#ffffff",black:"",gray:"",blue1:{dark:"",light:"",medium:""},blue2:{dark:"",light:"",medium:""},blue3:{dark:"",light:"",medium:""},green:{dark:"",light:"",medium:""},orange:{dark:"",light:"",medium:""},purple1:{dark:"",light:"",medium:""},purple2:{dark:"",light:"",medium:""},red:{dark:"",light:"",medium:""},yellow:{dark:"",light:"",medium:""}}},font:"Roboto",sizes:{header:48,headerMobile:56,instrumentalPanel:32,footer:0},lang:"ru"}};var Or,vr,xr=(Or=Object(pr.a)({},mr),Object(fr.a)(Object(pr.a)(Object(pr.a)({},Or),mr))),gr=function(e){var t=e.children;return Object(r.jsx)(hr.b,{injectFirst:!0,children:Object(r.jsx)(jr.a,{theme:xr,children:Object(r.jsx)(lr.ThemeProvider,{theme:xr,children:t})})})};!function(e){e[e.white=0]="white",e[e.lightGray=1]="lightGray",e[e.lightGraySecond=2]="lightGraySecond",e[e.mediumGray=3]="mediumGray",e[e.darkGray=4]="darkGray",e[e.lightBlue=5]="lightBlue",e[e.mediumBlue=6]="mediumBlue",e[e.darkBlue=7]="darkBlue",e[e.lightGreen=8]="lightGreen"}(vr||(vr={}));var yr=n(515),wr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t){return Object(yr.a)(["theme","app"].concat(Object(f.a)(e)),t)}},_r=function(e){return wr(["colors","main",vr[e]])},Cr=function(e){return wr(["sizes",e])},kr=lr.default.main.withConfig({displayName:"styles__Area",componentId:"p4p3g6-0"})(["height:calc(100vh - ","px);}","{height:calc(100vh - ","px);}background:",";"],(function(e){return Cr("header")(e)+Cr("footer")(e)+Cr("instrumentalPanel")(e)}),(function(e){return e.theme.breakpoints.down("sm")}),(function(e){return Cr("headerMobile")(e)}),_r(vr.lightBlue)),Sr=n(517),Ir=n(495),Mr=n(523),Pr=n(522),Tr=lr.default.div.withConfig({displayName:"style__HeaderPanelContainer",componentId:"sc-1qwcvkf-0"})(["background:",";height:","px;display:flex;align-items:center;flex-direction:row-reverse;padding-left:16px;padding-right:16px;"],_r(vr.darkBlue),Cr("header")),Ar=n(494),Lr=n(349),Nr=n.n(Lr),zr=n(358),Er=n.n(zr),Rr=n(361),Gr=n.n(Rr),Br=n(353),Fr=n.n(Br),Dr=n(354),Vr=n.n(Dr),Ur=n(499),Wr=n(355),Hr=n.n(Wr),Yr=n(359),Xr=n.n(Yr),Zr=n(497),Kr=n(498),qr=n(360),Jr=n.n(qr),$r=n(352),Qr=n.n($r),ei=n(351),ti=n.n(ei),ni=n(356),ri=n.n(ni),ii=n(350),ai=n.n(ii),ci=n(357),oi=n.n(ci),si=Object(lr.default)(Nr.a).withConfig({displayName:"icons__AppOpenPointCloudFiltersIcon",componentId:"kcxj5y-0"})(["color:",""],_r(vr.darkGray)),li=Object(lr.default)(ai.a).withConfig({displayName:"icons__AppSettingsIcon",componentId:"kcxj5y-1"})(["color:",""],_r(vr.white)),ui=Object(lr.default)(ti.a).withConfig({displayName:"icons__AppLoadSchemeFile",componentId:"kcxj5y-2"})(["olor:",""],_r(vr.darkGray)),di=Object(lr.default)(Qr.a).withConfig({displayName:"icons__AppClearPointCloudIcon",componentId:"kcxj5y-3"})(["color:",""],_r(vr.darkGray)),bi=Object(lr.default)(Fr.a).withConfig({displayName:"icons__AppCloseIcon",componentId:"kcxj5y-4"})(["color:",""],_r(vr.white)),hi=Object(lr.default)(Vr.a).withConfig({displayName:"icons__AppArrowCloseLeft",componentId:"kcxj5y-5"})([""]),ji=Object(lr.default)(Hr.a).withConfig({displayName:"icons__AppPointCloudIcon",componentId:"kcxj5y-6"})([""]),pi=Object(lr.default)(ri.a).withConfig({displayName:"icons__AppSchemeIcon",componentId:"kcxj5y-7"})([""]),fi=Object(lr.default)(Zr.a).withConfig({displayName:"icons__AppExpandLess",componentId:"kcxj5y-8"})(["color:",""],_r(vr.darkGray)),mi=Object(lr.default)(Kr.a).withConfig({displayName:"icons__AppExpandMoreIcon",componentId:"kcxj5y-9"})(["color:",""],_r(vr.darkGray)),Oi=Object(lr.default)(oi.a).withConfig({displayName:"icons__AppModelsIcon",componentId:"kcxj5y-10"})(["color:",""],_r(vr.darkGray)),vi=Object(lr.default)(Er.a).withConfig({displayName:"icons__AppPublishIcon",componentId:"kcxj5y-11"})(["","{color:","}","{color:","}"],(function(e){return e.theme.breakpoints.down("sm")}),_r(vr.mediumGray),(function(e){return e.theme.breakpoints.up("sm")}),_r(vr.white)),xi=Object(lr.default)(Ur.a).withConfig({displayName:"icons__AppListItemIcon",componentId:"kcxj5y-12"})([""]),gi=Object(lr.default)(Xr.a).withConfig({displayName:"icons__AppMenuIcon",componentId:"kcxj5y-13"})(["font-size:35px;color:",""],_r(vr.white)),yi=Object(lr.default)(Jr.a).withConfig({displayName:"icons__AppMoreVertIcon",componentId:"kcxj5y-14"})(["font-size:35px;color:",""],_r(vr.white)),wi=Object(lr.default)(Gr.a).withConfig({displayName:"icons__AppUserAccountIcon",componentId:"kcxj5y-15"})(["font-size:35px;color:",""],_r(vr.white)),_i=Object(lr.withTheme)((function(e){var t=Object(Pr.a)().t;return Object(r.jsx)(Tr,{children:Object(r.jsx)(Mr.a,{title:t("user_account"),children:Object(r.jsx)(Ar.a,{size:"small",color:"primary",style:{marginLeft:10},children:Object(r.jsx)(wi,{})})})})})),Ci=Object(lr.withTheme)((function(e){var t=Object(Pr.a)().t,n=or();return Object(r.jsxs)("div",{children:[Object(r.jsxs)(i.Fragment,{children:[Object(r.jsx)("input",{color:"primary",type:"file",onChange:function(e){var t;e.preventDefault();var r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&void 0!==r&&n(w(r)),e.preventDefault()},id:"icon-button-file",style:{display:"none"}}),Object(r.jsx)(Mr.a,{title:t("load_file_with_point_cloud"),children:Object(r.jsx)("label",{htmlFor:"icon-button-file",children:Object(r.jsx)(Ar.a,{component:"span",size:"small",color:"primary",children:Object(r.jsx)(vi,{})})})})]}),Object(r.jsx)(Mr.a,{title:t("open_panel_point_cloud_filters"),children:Object(r.jsx)(Ar.a,{size:"small",color:"primary",onClick:function(){return n(U())},style:{verticalAlign:"bottom",marginLeft:8},children:Object(r.jsx)(si,{})})}),Object(r.jsx)(Mr.a,{title:t("point_cloud_clear"),children:Object(r.jsx)(Ar.a,{size:"small",color:"primary",onClick:function(){return null},style:{verticalAlign:"bottom",marginLeft:8},children:Object(r.jsx)(di,{})})})]})})),ki=lr.default.div.withConfig({displayName:"style__Panel",componentId:"cf9oyy-0"})(["background:",";height:","px;display:flex;flex-direction:row;align-items:center;padding-left:16px;padding-right:16px;"],_r(vr.mediumGray),Cr("instrumentalPanel")),Si=n(502),Ii=Object(lr.default)(Si.a).withConfig({displayName:"style__AppDivider",componentId:"ghjmxl-0"})(["background-color:",";"],_r(vr.mediumGray)),Mi=Object(lr.default)(Si.a).withConfig({displayName:"style__AppDividerLight",componentId:"ghjmxl-1"})(["background-color:",";"],_r(vr.lightGray)),Pi=Object(lr.default)(Si.a).withConfig({displayName:"style__AppDividerBold",componentId:"ghjmxl-2"})(["background-color:",";width:1.15px;height:24px;margin-left:8px;margin-right:8px;"],_r(vr.lightGray)),Ti=Object(lr.withTheme)((function(e){var t=Object(Pr.a)().t,n=or();return Object(r.jsxs)("div",{children:[Object(r.jsxs)(i.Fragment,{children:[Object(r.jsx)("input",{color:"primary",type:"file",onChange:function(e){var t,r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&void 0!==r&&(n(I(r)),e.target.value="")},id:"scheme-load-file",style:{display:"none"}}),Object(r.jsx)(Mr.a,{title:t("load_file_with_scheme"),children:Object(r.jsx)("label",{htmlFor:"scheme-load-file",children:Object(r.jsx)(Ar.a,{component:"span",size:"small",color:"primary",children:Object(r.jsx)(ui,{})})})})]}),Object(r.jsx)(i.Fragment,{children:Object(r.jsx)(Mr.a,{title:t("scheme_display_settings"),children:Object(r.jsx)("label",{htmlFor:"scheme-open-display-settings",children:Object(r.jsx)(Ar.a,{onClick:function(){return n(q())},component:"span",size:"small",color:"primary",children:Object(r.jsx)(li,{})})})})})]})})),Ai=Object(lr.withTheme)((function(e){var t=Object(Pr.a)().t,n=or();return Object(r.jsx)("div",{children:Object(r.jsx)(i.Fragment,{children:Object(r.jsx)(Mr.a,{title:t("scheme_models"),children:Object(r.jsx)("label",{htmlFor:"scheme-open-display-settings",children:Object(r.jsx)(Ar.a,{onClick:function(){return n(oe())},component:"span",size:"small",color:"primary",children:Object(r.jsx)(Oi,{})})})})})})})),Li=Object(lr.withTheme)((function(e){var t=Object(p.c)(nt)==gn.RibGeometry;return Object(r.jsxs)(ki,{children:[Object(r.jsx)(Ci,{}),Object(r.jsx)(Pi,{orientation:"vertical"}),Object(r.jsx)(Ti,{}),Object(r.jsx)(Pi,{orientation:"vertical"}),t?Object(r.jsx)(Ai,{}):a.a.Fragment,t?Object(r.jsx)(Pi,{orientation:"vertical"}):a.a.Fragment]})}));n(306);function Ni(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}var zi=lr.default.canvas.withConfig({displayName:"style__Canvas",componentId:"sc-123iew8-0"})(["outline:none;display:block;margin:0;padding:0;width:100vw;touch-action:none;","{height:calc(100vh - ","px);}","{height:calc(100vh - ","px);}"],(function(e){return e.theme.breakpoints.up("sm")}),(function(e){return Cr("header")(e)+Cr("footer")(e)+Cr("instrumentalPanel")(e)}),(function(e){return e.theme.breakpoints.down("sm")}),(function(e){return Cr("headerMobile")(e)})),Ei=n(70),Ri=lr.default.div.withConfig({displayName:"style__PointCloudContainer",componentId:"sc-8ynvxi-0"})(['pointerEvents:"none";position:fixed;height:100%;width:100%;left:0;top:61.5px;background:transparent;pointer-events:none;']),Gi=n(363),Bi=function(e,t,n){var r=new FileReader;r.onload=function(){var e=Object(Ht.a)(ft.a.mark((function e(i){var a,c,o,l,u,d,b;return ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.result,c=new wn.m("pcs",3,n,{updatable:!1}),e.next=4,Object(Gi.filterPointCloudAsync)(a,t);case 4:return o=e.sent,l=function(){var e=Object(Ht.a)(ft.a.mark((function e(t,n,r){var i,a,c;return ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=o[n],a=i.vector,c=i.color,t.position=new wn.r(a.x,a.y,a.z),t.color=new wn.e(c.r,c.g,c.b,1);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),u=o.length,c.addPoints(u,l),e.next=10,c.buildMeshAsync();case 10:return e.sent,d=yn.get(Dt),b={message:s.a.t("point_cloud_successfully_uploaded"),alertType:"success"},d.send(qt,b),e.abrupt("return",c);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var i=e;r.readAsText(i)},Fi=n(184),Di=n.n(Fi),Vi=n(276),Ui=n.n(Vi),Wi=Object(et.a)([N,function(e){return e.ui.sections.pointCloud.pointsCloudFile}],(function(e,t){return{pointCloudFilters:e,file:t}})),Hi=Object(i.forwardRef)((function(e,t){Object(i.useImperativeHandle)(t,(function(){return{initialize:b}}));var n=Object(i.useState)({engineData:null}),a=Object(Ei.a)(n,2),c=a[0],o=a[1],s=c.engineData,l=Object(p.c)(Wi),u=l.pointCloudFilters,d=l.file,b=function(){var e=Object(Ht.a)(ft.a.mark((function e(t){return ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o({engineData:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return d&&function(){var e=Object(Ht.a)(ft.a.mark((function e(){return ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bi(d,u,s.scene);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),Object(r.jsx)(Ri,{})})),Yi=Ui()(Di()(null)(Hi)),Xi=n(214),Zi=n.n(Xi),Ki=n(506),qi=n(507),Ji=n(514),$i=n(234),Qi=lr.default.section.withConfig({displayName:"style__PanelContainer",componentId:"sc-1bzi2x3-0"})(["width:","px;height:","px;background:",";border-radius:5px;pointer-events:auto;visibility:",";"],(function(e){return e.width}),(function(e){return e.height}),_r(vr.lightGray),(function(e){return e.isActive?"visible":"hidden"})),ea=lr.default.strong.withConfig({displayName:"style__PanelHeaderContainer",componentId:"sc-1bzi2x3-1"})([""]),ta=lr.default.div.withConfig({displayName:"style__PanelMobileContainer",componentId:"sc-1bzi2x3-2"})(["width:100%;display:flex;justify-content:center"]),na=lr.default.div.withConfig({displayName:"style__PanelHeader",componentId:"sc-1bzi2x3-3"})(["cursor:move;background:",";border-top-left-radius:5px;border-top-right-radius:5px;color:",";text-align:center;height:30px;"],_r(vr.darkBlue),_r(vr.white)),ra=lr.default.div.withConfig({displayName:"style__PanelHeaderText",componentId:"sc-1bzi2x3-4"})(["margin-left:8px;align-content:center;display:inline-block;"]),ia=Object(lr.default)($i.a).withConfig({displayName:"style__PanelHeaderTypography",componentId:"sc-1bzi2x3-5"})([""]),aa=lr.default.div.withConfig({displayName:"style__PanelBodyContainer",componentId:"sc-1bzi2x3-6"})(["margin:16px;"]),ca=Object(lr.default)(Ki.a).withConfig({displayName:"style__FormControlStyled",componentId:"sc-1bzi2x3-7"})(["margin-left:16px;margin-right:16px;margin-top:8px;minWidth:120px;"]),oa=Object(lr.default)(qi.a).withConfig({displayName:"style__FormControlLabelStyled",componentId:"sc-1bzi2x3-8"})(["margin-left:8px;"]),sa=Object(lr.default)(Ji.a).withConfig({displayName:"style__SelectStyled",componentId:"sc-1bzi2x3-9"})(["marginTop:16px;"]),la=lr.default.div.withConfig({displayName:"style__PointCloudPanelLineContainer",componentId:"bs1pga-0"})(["margin-top:12px;"]),ua=n(521),da=n(527),ba=Object(et.a)([N],(function(e){return{filter:e}})),ha=Object(lr.withTheme)((function(e){var t=or(),n=Object(Pr.a)().t,i=Object(p.c)(ba).filter;return Object(r.jsxs)(aa,{children:[Object(r.jsxs)(la,{children:[Object(r.jsx)(ua.a,{label:n("point_cloud_x_from"),type:"number",name:"x-from",step:"0.1",value:i.filterXFromLimit,onChange:function(e){var n=e.target.value;Object(da.a)(n)&&t(R(n))},style:{width:100,height:20},InputLabelProps:{shrink:!0},inputProps:{step:.1},variant:"standard"}),Object(r.jsx)(ua.a,{id:"outlined-number",label:n("point_cloud_x_to"),type:"number",name:"x-to",step:"0.1",value:i.filterXToLimit,onChange:function(e){return t(G(e.target.value))},style:{width:100,marginLeft:24},InputLabelProps:{shrink:!0},inputProps:{step:.1},variant:"standard"})]}),Object(r.jsxs)(la,{children:[Object(r.jsx)(ua.a,{id:"outlined-number",label:n("point_cloud_y_from"),type:"number",name:"y-from",step:"0.1",value:i.filterYFromLimit,onChange:function(e){return t(B(e.target.value))},style:{width:100,height:20},InputLabelProps:{shrink:!0},inputProps:{step:.1},variant:"standard"}),Object(r.jsx)(ua.a,{id:"outlined-number",label:n("point_cloud_y_to"),type:"number",name:"y-to",step:"0.1",value:i.filterYToLimit,onChange:function(e){return t(F(e.target.value))},style:{width:100,marginLeft:24},InputLabelProps:{shrink:!0},inputProps:{step:.1},variant:"standard"})]}),Object(r.jsxs)(la,{children:[Object(r.jsx)(ua.a,{id:"outlined-number",label:n("point_cloud_z_from"),type:"number",name:"z-from",step:"0.1",value:i.filterZFromLimit,onChange:function(e){return t(D(e.target.value))},style:{width:100,height:20},InputLabelProps:{shrink:!0},inputProps:{step:.1},variant:"standard"}),Object(r.jsx)(ua.a,{id:"outlined-number",label:n("point_cloud_z_to"),type:"number",name:"z-to",step:"0.1",value:i.filterZToLimit,onChange:function(e){return t(V(e.target.value))},style:{width:100,marginLeft:24},InputLabelProps:{shrink:!0},inputProps:{step:.1},variant:"standard"})]})]})})),ja=Object(lr.withTheme)((function(e){var t=or(),n=Object(Pr.a)().t,i=Object(p.c)(L);return Object(r.jsx)(Zi.a,{bounds:"parent",handle:"strong",defaultPosition:{x:16,y:16},grid:[25,25],children:Object(r.jsx)(Qi,{isActive:i,width:257,height:240,children:Object(r.jsxs)("section",{children:[Object(r.jsx)(ea,{children:Object(r.jsxs)(na,{children:[Object(r.jsx)(ra,{children:Object(r.jsx)(ia,{variant:"subtitle1",children:n("point_cloud_filters")})}),Object(r.jsx)(Mr.a,{title:n("close"),style:{float:"right"},children:Object(r.jsx)("label",{children:Object(r.jsx)(Ar.a,{component:"span",size:"small",onClick:function(){return t(W())},color:"primary",children:Object(r.jsx)(bi,{})})})})]})}),Object(r.jsx)(ha,{})]})})})})),pa=n(511),fa=n(510),ma=Object(lr.withTheme)((function(e){var t=or(),n=Object(Pr.a)().t,i=Object(p.c)(nt);return Object(r.jsx)("div",{children:Object(r.jsxs)(ca,{children:[Object(r.jsxs)(sa,{value:i,onChange:function(e){t(ct(e.target.value))},displayEmpty:!0,inputProps:{"aria-label":"Without label"},children:[Object(r.jsx)(pa.a,{value:gn.Topology,children:n("scheme_mode_topology")}),Object(r.jsx)(pa.a,{value:gn.RibGeometry,children:n("scheme_mode_rib_geometry")})]}),Object(r.jsx)(fa.a,{children:n("mode")})]})})})),Oa=Object(lr.withTheme)((function(e){var t=or(),n=Object(Pr.a)().t,a=Object(p.c)(fe);return Object(r.jsx)(i.Fragment,{children:Object(r.jsxs)(ca,{children:[Object(r.jsxs)(sa,{value:a,onChange:function(e){t(xe(e.target.value))},displayEmpty:!0,inputProps:{"aria-label":"Without label"},children:[Object(r.jsx)(pa.a,{value:Q.Orthographic,children:n("orthographic")}),Object(r.jsx)(pa.a,{value:Q.Perspective,children:n("perspective")})]}),Object(r.jsx)(fa.a,{children:n("camera")})]})})})),va=n(34),xa=n(518),ga=n(278),ya=Object(va.a)({root:{color:ga.a[400],"&$checked":{color:ga.a[600]}},checked:{}})((function(e){return Object(r.jsx)(xa.a,Object(pr.a)({color:"default"},e))})),wa=Object(lr.withTheme)((function(e){var t=or(),n=Object(Pr.a)().t,a=Object(p.c)(we);return Object(r.jsx)(i.Fragment,{children:Object(r.jsx)(oa,{control:Object(r.jsx)(ya,{checked:a,onChange:function(e){t(ke(e.target.checked))}}),label:n("showAxisOnCameraTarget")})})})),_a=Object(lr.withTheme)((function(e){var t=e.scene,n=Object(Pr.a)().t,i=or(),a=Object(p.c)(X);return Object(r.jsx)(Zi.a,{bounds:"parent",handle:"strong",defaultPosition:{x:16,y:16},grid:[25,25],children:Object(r.jsx)(Qi,{isActive:a,width:264,height:250,children:Object(r.jsxs)("section",{children:[Object(r.jsx)(ea,{children:Object(r.jsxs)(na,{children:[Object(r.jsx)(ra,{children:Object(r.jsx)(ia,{variant:"subtitle1",children:n("scheme_settings")})}),Object(r.jsx)(Mr.a,{title:n("close"),style:{float:"right"},children:Object(r.jsx)("label",{children:Object(r.jsx)(Ar.a,{component:"span",size:"small",onClick:function(){return i(J())},color:"primary",children:Object(r.jsx)(bi,{})})})})]})}),Object(r.jsx)(ma,{}),Object(r.jsx)(Oa,{}),Object(r.jsx)(wa,{scene:t})]})})})})),Ca=lr.default.div.withConfig({displayName:"style__OnCanvasContainer",componentId:"sc-1tto5d9-0"})(["position:fixed;height:calc(100vh - ","px);background:transparent;left:0;top:81px;right:0;"],(function(e){return Cr("header")(e)+Cr("footer")(e)+Cr("instrumentalPanel")(e)})),ka=lr.default.div.withConfig({displayName:"style__OnCanvasContainerWithEvents",componentId:"sc-1tto5d9-1"})(["position:fixed;height:calc(100vh - ","px);background:transparent;pointer-events:none;left:0;top:81px;right:0;"],(function(e){return Cr("header")(e)+Cr("footer")(e)+Cr("instrumentalPanel")(e)})),Sa=Object(lr.withTheme)((function(e){var t=or(),n=Object(Pr.a)().t,i=Object(p.c)(ie);return Object(r.jsx)("div",{children:Object(r.jsxs)(ca,{children:[Object(r.jsxs)(sa,{value:i,onChange:function(e){var n=e.target.value;switch(n){case j.Pressure:var r=cr.getState().entity.models.pressure,i=Fe(r),a=Bn.a.last(i);a&&t(lt(a.id));break;case j.Air:case j.None:t(lt(null))}t(ue(n))},displayEmpty:!0,inputProps:{"aria-label":"Without label"},children:[Object(r.jsx)(pa.a,{value:j.None,children:n("none")}),Object(r.jsx)(pa.a,{value:j.Pressure,children:n("pressure")}),Object(r.jsx)(pa.a,{value:j.Air,children:n("models_air")})]}),Object(r.jsx)(fa.a,{children:n("model")})]})})})),Ia=Object(lr.withTheme)((function(e){var t=or(),n=Object(Pr.a)().t,a=Object(p.c)(re);return Object(r.jsx)(i.Fragment,{children:Object(r.jsxs)(ca,{children:[Object(r.jsxs)(sa,{value:a,onChange:function(e){t(le(e.target.value))},displayEmpty:!0,inputProps:{"aria-label":"Without label"},children:[Object(r.jsx)(pa.a,{value:h.Default,children:n("default")}),Object(r.jsx)(pa.a,{value:h.Aeroset,children:n("aeroset")}),Object(r.jsx)(pa.a,{value:h.Iron,children:n("iron")})]}),Object(r.jsx)(fa.a,{children:n("gradient")})]})})})),Ma=Object(lr.withTheme)((function(e){Object(p.c)(re);var t=yn.get(Wt).getGradientAsCSSProperty();return Object(r.jsx)("div",{style:{background:t,height:150,width:50,marginTop:16,marginLeft:16}})})),Pa=Object(lr.withTheme)((function(e){e.scene;var t=Object(Pr.a)().t,n=or(),i=Object(p.c)(ne);return Object(r.jsx)(Zi.a,{bounds:"parent",handle:"strong",defaultPosition:{x:16,y:16},grid:[25,25],children:Object(r.jsx)(Qi,{isActive:i,width:257,height:340,children:Object(r.jsxs)("div",{children:[Object(r.jsx)(ea,{children:Object(r.jsxs)(na,{children:[Object(r.jsx)(ra,{children:Object(r.jsx)(ia,{variant:"subtitle1",children:t("scheme_models")})}),Object(r.jsx)(Mr.a,{title:t("close"),style:{float:"right"},children:Object(r.jsx)("label",{children:Object(r.jsx)(Ar.a,{component:"span",size:"small",onClick:function(){return n(se())},color:"primary",children:Object(r.jsx)(bi,{})})})})]})}),Object(r.jsx)(Sa,{}),Object(r.jsx)(Ia,{}),Object(r.jsx)(Ma,{})]})})})})),Ta=Object(i.forwardRef)((function(e,t){Object(i.useImperativeHandle)(t,(function(){return{initialize:l}}));var n=Object(i.useState)({scene:null}),a=Object(Ei.a)(n,2),c=a[0],o=a[1],s=c.scene,l=function(e){o({scene:e.scene})};return Object(r.jsx)(ka,{children:Object(r.jsxs)(Sr.a,{smDown:!0,children:[Object(r.jsx)(ja,{}),Object(r.jsx)(_a,{scene:s}),Object(r.jsx)(Pa,{scene:s})]})})})),Aa=Object(lr.withTheme)(Di()(null)(Ta)),La=n(16),Na=function(e,t,n){var r=new wn.o(e),i=function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}(n);return i&&null!==i&&(r.clearColor=new wn.e(i.r/255,i.g/255,i.b/255,1)),e.runRenderLoop((function(){r.render()})),t.onresize=function(){e.resize()},window.onresize=function(){e.resize()},r},za=function(e,t){var n=new wn.a("Camera",0,0,-100,new wn.r(1,2,-3),t);n.setPosition(new wn.r(0,0,-100)),n.target=new wn.r(0,0,0),n.panningSensibility=200,n.orthoLeft=-8,n.orthoRight=8;var r,i,a=e.height/e.width;n.orthoTop=n.orthoRight*a,n.orthoBottom=n.orthoLeft*a,n.attachControl(e,!1),n.alpha+=Math.PI,n.mode=wn.c.ORTHOGRAPHIC_CAMERA,n.wheelPrecision=100,n.pinchPrecision=30,n.minZ=.01,n.maxZ=1e3,n.lowerRadiusLimit=n.radius,n.upperRadiusLimit=n.radius;var c=!1;t.onPointerDown=function(a){if(a.ctrlKey){var o=t.pick(t.pointerX,t.pointerY);if(o.pickedMesh){var s=n.position.subtract(o.pickedPoint).normalize();r=wn.j.FromPositionAndNormal(o.pickedPoint,s),i=o.pickedPoint,c=!0,n.detachControl(e)}}},t.onPointerUp=function(){c=!1,n.attachControl(e,!0,!0)};var o=wn.g.Identity();return t.onPointerMove=function(e){if(c){var a=t.createPickingRay(t.pointerX,t.pointerY,o,n,!1),s=a.intersectsPlane(r);if(null===s)return;var l=a.direction.scale(s).add(a.origin).subtract(i);n.target.subtractInPlace(l)}},n},Ea=function(e,t){var n=new wn.k("Omni",new wn.r(10,50,50),e);return e.registerBeforeRender((function(){n.position=t.position})),n},Ra=0,Ga=null;function Ba(e,t,n){e.onPointerObservable.add((function(e,t){var r=e.event;!function(e,t){var n=.9*Math.max(-1,Math.min(1,e));(n>0&&Ra<50||n<0)&&(Ra+=n,Da(t,n,Ga))}(r.wheelDelta||-r.detail||r.deltaY,n)}),wn.l.POINTERWHEEL),e.onPointerObservable.add((function(){Ga=wn.r.Unproject(new wn.r(e.pointerX,e.pointerY,0),t.getRenderWidth(),t.getRenderHeight(),n.getWorldMatrix(),n.getViewMatrix(),n.getProjectionMatrix())}),wn.l.POINTERMOVE)}var Fa,Da=function(e,t,n){if(n){var r=Math.abs(e.orthoLeft-e.orthoRight),i=Math.abs(e.orthoTop-e.orthoBottom),a=i/r,c=(e.orthoLeft-n.x)/r;e.orthoLeft-=c*t;var o=(e.orthoRight-n.x)/r;e.orthoRight-=o*t;var s=(e.orthoTop-n.y)/i;e.orthoTop-=s*t*a;var l=(e.orthoBottom-n.y)/i;e.orthoBottom-=l*t*a,e.panningSensibility=6250/Math.abs(r/2)}},Va=Object(i.forwardRef)((function(e,t){Object(i.useImperativeHandle)(t,(function(){return{initialize:l}}));var n=Object(i.useState)({scene:null,camera:null}),c=Object(Ei.a)(n,2),o=c[0],s=c[1],l=(o.scene,o.camera,function(){var e=Object(Ht.a)(ft.a.mark((function e(t){var n,r;return ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.scene,r=t.camera,s({scene:n,camera:r});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(r.jsx)(a.a.Fragment,{})})),Ua=Ui()(Di()(null)(Va)),Wa=function(e,t,n){var r=function(e,t,n,r){var a=new wn.f("DynamicTexture",50,r,!0);a.hasAlpha=!0,a.drawText(e,5,40,"bold 36px Arial",t,"transparent",!0);var c=i.CreatePlane("TextPlane",n,r,!0),o=new wn.p("TextPlaneMaterial",r);return o.specularColor=new wn.d(0,0,0),o.diffuseTexture=a,c.material=o,c.material.backFaceCulling=!1,c},i=wn.h,a=i.CreateLines("axisX",[wn.r.Zero(),new wn.r(t,0,0),new wn.r(.95*t,.05*t,0),new wn.r(t,0,0),new wn.r(.95*t,-.05*t,0)],e);a.color=new wn.d(1,0,0);var c=r("X","red",t/10,e);c.position=new wn.r(n.x+.9*t,n.y+-.05*t,n.z);var o=i.CreateLines("axisY",[wn.r.Zero(),new wn.r(0,t,0),new wn.r(-.05*t,.95*t,0),new wn.r(0,t,0),new wn.r(.05*t,.95*t,0)],e);o.color=new wn.d(0,1,0);var s=r("Y","green",t/10,e);s.position=new wn.r(n.x,n.y+.9*t,n.z+-.05*t);var l=i.CreateLines("axisZ",[wn.r.Zero(),new wn.r(0,0,t),new wn.r(0,-.05*t,.95*t),new wn.r(0,0,t),new wn.r(0,.05*t,.95*t)],e);l.color=new wn.d(0,0,1);var u=r("Z","blue",t/10,e);return u.position=new wn.r(n.x,n.y+.05*t,n.z+.9*t),a.position=n,o.position=n,l.position=n,[a,o,l,c,s,u]},Ha=null,Ya=Object(lr.withTheme)((function(e){var t=or(),n=e.scene,a=!1,c=Object(p.c)(pe),o=Object(p.c)(we);if(o&&n&&c)Ha=Wa(n,2,new wn.r(c.x,c.y,c.z));else if(!o&&n&&Ha){var s,l=Object(vt.a)(Ha);try{for(l.s();!(s=l.n()).done;){s.value.dispose()}}catch(h){l.e(h)}finally{l.f()}}Object(i.useEffect)((function(){var e=yn.get(Dt);return e.subscribe(nn,d),e.subscribe(rn,b),e.subscribe(an,u),function(){e.unsubscribe(nn,d),e.unsubscribe(rn,b),e.unsubscribe(an,u)}}),[n,c,o]);var u=function(e){a&&n&&function(e){var r=new wn.r(e.screenX,e.screenY,0),i=n.getEngine(),c=wn.r.Unproject(r,i.getRenderWidth(),i.getRenderHeight(),wn.g.Identity(),n.getViewMatrix(),n.getProjectionMatrix());t(ve({x:c.x,y:c.y,z:c.z})),a=!1,document.documentElement.style.cursor="default",n.activeCamera.target=c}(e[0])},d=function(e){var t=e[0];"c"!==t&&"C"!==t||(a=!0,document.documentElement.style.cursor="crosshair")},b=function(e){var t=e[0];"c"!==t&&"C"!==t||(a=!1,document.documentElement.style.cursor="default")};return Object(r.jsx)(Ca,{})})),Xa=Object(i.forwardRef)((function(e,t){Object(i.useImperativeHandle)(t,(function(){return{initialize:l}}));var n=Object(i.useState)({scene:null}),a=Object(Ei.a)(n,2),c=a[0],o=a[1],s=c.scene,l=function(e){o({scene:e.scene})};return Object(r.jsx)(ka,{children:Object(r.jsx)(Ya,{scene:s})})})),Za=Object(lr.withTheme)(Di()(null)(Xa)),Ka=n(365),qa=function(e){var t=new wn.h("Topology rib base mesh",e);t.visibility=0;var n=new wn.h("Geometry rib base mesh",e);n.visibility=0;var r=wn.i.CreateSphere("Node base mesh",{diameter:.15,updatable:!0},e);return r.visibility=0,{materials:{ribGradientMaterial:new Ka.a("Gradient material",e),ribMaterial:new wn.p("Rib material",e),nodeMaterial:new wn.p("Node material",e)},baseMeshes:{nodeBaseMesh:r,topologyRibBaseMesh:t,geometryRibBaseMesh:n}}},Ja=Object(lr.withTheme)((function(e){var t=Object(i.useRef)(null),n=Object(i.useRef)(null),a=Object(i.useRef)(null),c=Object(i.useRef)(null),o=Object(i.useRef)(null);Object(i.useEffect)((function(){return o.current&&s(o.current),function(){o.current&&(o.current.onclick=null)}}),[]);var s=function(){var r=Object(Ht.a)(ft.a.mark((function r(i){var o,s,u,d,b,h,j,p;return ft.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(Ni()){r.next=4;break}return console.error("Canvas is not supported!"),alert("Canvas is not supported!"),r.abrupt("return");case 4:o=new La.a(i,!0),s=_r(vr.lightGraySecond)(e),u=Na(o,i,s),d=za(i,u),b=Ea(u,d),h=qa(u),Ba(u,o,d),(j=yn.get(Ft)).engine=o,j.scene=u,j.camera=d,j.light=b,j.resources=h,p={camera:d,canvas:i,scene:u},n.current&&n.current.initialize(p),t.current&&t.current.initialize(p),a.current&&a.current.initialize(p),c.current&&c.current.initialize(p),i.onclick=l;case 23:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),l=function(e){yn.get(Dt).send(an,e)};return Object(r.jsxs)("div",{id:"canvasContainer",children:[Object(r.jsx)(zi,{ref:o}),Object(r.jsx)(Ua,{ref:n}),Object(r.jsx)(Yi,{ref:t}),Object(r.jsx)(Aa,{ref:a}),Object(r.jsx)(Za,{ref:c})]})})),$a=lr.default.div.withConfig({displayName:"style__HeaderMobilePanelContainer",componentId:"sc-15vg9o0-0"})(["background:",";height:","px;flexGrow:1;"],_r(vr.lightGray),Cr("headerMobile")),Qa=n(500),ec=n(501),tc=n(524),nc=n(503),rc=n(458),ic=n(504),ac=n(505);!function(e){e[e.None=0]="None",e[e.PointCloudFilters=1]="PointCloudFilters",e[e.SchemeSettings=2]="SchemeSettings"}(Fa||(Fa={}));var cc=Object(lr.withTheme)((function(e){var t=Object(Pr.a)().t,n=or(),c=Object(i.useState)({subMenuIsOpen:!1}),o=Object(Ei.a)(c,2),s=o[0],l=o[1],u=s.subMenuIsOpen,d=function(){var e=yn.get(Dt);e.send(Qt,{contentType:Fa.PointCloudFilters}),e.send($t,{})},b=_r(vr.mediumGray)(e);return Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsxs)(rc.a,{button:!0,onClick:function(){l({subMenuIsOpen:!u})},children:[Object(r.jsx)(Ur.a,{children:Object(r.jsx)(ji,{})}),Object(r.jsx)(ic.a,{primary:t("point_cloud")}),u?Object(r.jsx)(fi,{}):Object(r.jsx)(mi,{})]}),Object(r.jsx)(ac.a,{in:u,timeout:"auto",unmountOnExit:!0,children:Object(r.jsxs)(nc.a,{component:"div",disablePadding:!0,children:[Object(r.jsx)(rc.a,{button:!0,style:{paddingLeft:32},children:Object(r.jsxs)(i.Fragment,{children:[Object(r.jsx)("input",{color:"primary",type:"file",onChange:function(e){var t;e.preventDefault();var r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&void 0!==r&&(yn.get(Dt).send($t,{}),n(w(r)))},id:"icon-button-file",style:{display:"none"}}),Object(r.jsx)("label",{htmlFor:"icon-button-file",children:Object(r.jsx)(Ur.a,{children:Object(r.jsx)(vi,{style:{color:b}})})}),Object(r.jsx)("label",{htmlFor:"icon-button-file",children:Object(r.jsx)(ic.a,{primary:t("load_file_with_point_cloud")})})]})}),Object(r.jsxs)(rc.a,{button:!0,style:{paddingLeft:32},children:[Object(r.jsx)(xi,{onClick:d,children:Object(r.jsx)(si,{style:{color:b}})}),Object(r.jsx)(ic.a,{onClick:d,primary:t("open_panel_point_cloud_filters")})]}),Object(r.jsxs)(rc.a,{button:!0,style:{paddingLeft:32},children:[Object(r.jsx)(xi,{children:Object(r.jsx)(di,{style:{color:b}})}),Object(r.jsx)(ic.a,{primary:t("point_cloud_clear")})]})]})})]})})),oc=lr.default.section.withConfig({displayName:"style__DrawerContainer",componentId:"sc-1gp9wxq-0"})(["width:250px;"]),sc=lr.default.div.withConfig({displayName:"style__DrawerHeader",componentId:"sc-1gp9wxq-1"})(["display:flex;justify-content:flex-end;align-items:center;padding:",";","{height:104px;}","{height:56px;}"],(function(e){return e.theme.spacing(0,1)}),(function(e){return e.theme.breakpoints.up("sm")}),(function(e){return e.theme.breakpoints.down("sm")})),lc=Object(lr.default)($i.a).withConfig({displayName:"style__DrawerHeaderTitle",componentId:"sc-1gp9wxq-2"})(["color:",";margin-right:auto;margin-left:16px;"],_r(vr.darkBlue)),uc=function(e){var t=Object(Pr.a)().t,n=e.isDark;return Object(r.jsxs)("div",{style:{color:n?"black":"white"},children:["     ",t("version"),": ",yn.get(Vt).GetVersion()]})},dc=Object(lr.withTheme)((function(e){var t=Object(Pr.a)().t,n=or(),c=Object(i.useState)({subMenuIsOpen:!1}),o=Object(Ei.a)(c,2),s=o[0],l=o[1],u=s.subMenuIsOpen,d=function(){var e=yn.get(Dt);e.send(Qt,{contentType:Fa.SchemeSettings}),e.send($t,{})},b=_r(vr.mediumGray)(e);return Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsxs)(rc.a,{button:!0,onClick:function(){l({subMenuIsOpen:!u})},children:[Object(r.jsx)(Ur.a,{children:Object(r.jsx)(pi,{})}),Object(r.jsx)(ic.a,{primary:t("scheme")}),u?Object(r.jsx)(fi,{}):Object(r.jsx)(mi,{})]}),Object(r.jsx)(ac.a,{in:u,timeout:"auto",unmountOnExit:!0,children:Object(r.jsxs)(nc.a,{component:"div",disablePadding:!0,children:[Object(r.jsx)(rc.a,{button:!0,style:{paddingLeft:32},children:Object(r.jsxs)(i.Fragment,{children:[Object(r.jsx)("input",{color:"primary",type:"file",onChange:function(e){var t;e.preventDefault();var r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&void 0!==r&&(yn.get(Dt).send($t,{}),n(I(r)),e.target.value="")},id:"icon-button-file",style:{display:"none"}}),Object(r.jsx)("label",{htmlFor:"icon-button-file",children:Object(r.jsx)(Ur.a,{children:Object(r.jsx)(vi,{style:{color:b}})})}),Object(r.jsx)("label",{htmlFor:"icon-button-file",children:Object(r.jsx)(ic.a,{primary:t("load_file_with_scheme")})})]})}),Object(r.jsxs)(rc.a,{button:!0,style:{paddingLeft:32},children:[Object(r.jsx)(xi,{onClick:d,children:Object(r.jsx)(li,{style:{color:b}})}),Object(r.jsx)(ic.a,{onClick:d,primary:t("scheme_settings")})]})]})})]})})),bc=Object(lr.withTheme)((function(e){var t=Object(Pr.a)().t,n=Object(i.useState)({isOpen:!1}),a=Object(Ei.a)(n,2),c=a[0],o=a[1],s=c.isOpen;Object(i.useEffect)((function(){o({isOpen:e.isOpen})}),[e.isOpen]);var l=function(){yn.get(Dt).send($t,{})};return Object(r.jsx)(tc.a,{anchor:"left",open:s,onClose:l,children:Object(r.jsxs)(oc,{children:[Object(r.jsxs)(sc,{children:[Object(r.jsx)(lc,{variant:"h5",children:t("aeroset")}),Object(r.jsx)(Mr.a,{title:t("close"),children:Object(r.jsx)(Ar.a,{onClick:l,children:Object(r.jsx)(hi,{onClick:l})})})]}),Object(r.jsx)(Si.a,{}),Object(r.jsxs)(nc.a,{component:"nav","aria-labelledby":"nested-list-subheader",style:{width:"100%"},children:[Object(r.jsx)(dc,{}),Object(r.jsx)(cc,{})]}),Object(r.jsx)("div",{style:{position:"absolute",bottom:8,left:8},children:Object(r.jsx)(uc,{isDark:!0})})]})})})),hc=lr.default.section.withConfig({displayName:"style__DrawerBottomContainer",componentId:"sc-6kgsav-0"})(["height:270px;align-content:center;"]),jc=lr.default.div.withConfig({displayName:"style__DrawerBottomHeader",componentId:"sc-6kgsav-1"})(["display:flex;vertical-align:center;justify-content:flex-end;align-items:center;padding:",";"],(function(e){return e.theme.spacing(0,1)})),pc=lr.default.div.withConfig({displayName:"style__MobilePanelContainer",componentId:"sc-6kgsav-2"})(["visibility:",";"],(function(e){return e.currentType&&e.stateType&&e.currentType.valueOf()===e.stateType.valueOf()?"visible":"collapse"})),fc=n(362),mc=n.n(fc),Oc=Object(lr.withTheme)((function(e){return Object(r.jsx)(ta,{children:Object(r.jsx)(ha,{})})})),vc=Object(lr.withTheme)((function(e){return Object(r.jsx)(ta,{children:Object(r.jsx)(ma,{})})})),xc=Object(lr.withTheme)((function(e){var t=Object(Pr.a)().t,n=Object(i.useState)({isOpen:!1,visiblePanel:Fa}),a=Object(Ei.a)(n,2),c=a[0],o=a[1],s=c.isOpen,l=c.visiblePanel;Object(i.useEffect)((function(){var e=yn.get(Dt);return e.subscribe(Qt,u),function(){e.unsubscribe(Qt,u)}}),[]);var u=function(e){var t=e[0];o({visiblePanel:t.contentType,isOpen:!0})},d=function(){o(Object(pr.a)(Object(pr.a)({},c),{},{isOpen:!1}))};return Object(r.jsx)(tc.a,{anchor:"bottom",open:s,onClose:d,children:Object(r.jsxs)(hc,{children:[Object(r.jsxs)(jc,{children:[Object(r.jsx)("div",{style:{marginRight:"auto"},children:Object(r.jsxs)($i.a,{variant:"h6",children:[Object(r.jsx)(pc,{currentType:Fa.PointCloudFilters,stateType:l,children:t("point_cloud_filters")}),Object(r.jsx)(pc,{currentType:Fa.SchemeSettings,stateType:l,children:t("scheme_settings")})]})}),Object(r.jsx)(Mr.a,{title:t("close"),children:Object(r.jsx)(Ar.a,{onClick:d,children:Object(r.jsx)(mc.a,{onClick:d})})})]}),Object(r.jsx)(Ii,{}),Object(r.jsx)(pc,{currentType:Fa.PointCloudFilters,stateType:l,children:Object(r.jsx)(Oc,{})}),Object(r.jsx)(pc,{currentType:Fa.SchemeSettings,stateType:l,children:Object(r.jsx)(vc,{})})]})})})),gc=Object(lr.withTheme)((function(e){var t=Object(Pr.a)().t,n=Object(i.useState)({drawerIsOpen:!1}),a=Object(Ei.a)(n,2),c=a[0],o=a[1];Object(i.useEffect)((function(){var t=yn.get(Dt);return t.subscribe($t,s),o({isOpen:e.isOpen}),function(){t.unsubscribe($t,s)}}),[e.isOpen]);var s=function(e){o({drawerIsOpen:!1})};return Object(r.jsxs)($a,{children:[Object(r.jsx)(Qa.a,{position:"fixed",children:Object(r.jsxs)(ec.a,{style:{background:e.theme.app.colors.main.darkBlue},children:[Object(r.jsx)(Mr.a,{title:t("menu"),children:Object(r.jsx)(Ar.a,{size:"medium","aria-label":"open drawer",style:{verticalAlign:"middle"},onClick:function(){o({drawerIsOpen:!0})},children:Object(r.jsx)(gi,{})})}),Object(r.jsx)($i.a,{variant:"h6",style:{display:"block",flexGrow:1,marginLeft:16},children:"'Scheme name'"}),Object(r.jsx)(Mr.a,{title:t("actions"),children:Object(r.jsx)(Ar.a,{size:"small",style:{marginLeft:10},children:Object(r.jsx)(yi,{})})}),Object(r.jsx)(Mr.a,{title:t("user_account"),children:Object(r.jsx)(Ar.a,{size:"small",style:{marginLeft:10},children:Object(r.jsx)(wi,{})})})]})}),Object(r.jsx)(bc,{isOpen:c.drawerIsOpen}),Object(r.jsx)(xc,{})]})})),yc=n(520),wc=n(516),_c=lr.default.div.withConfig({displayName:"style__SnackbarWrapper",componentId:"sc-1522knk-0"})(["width:100%;height:100%;"]),Cc=n(492),kc=Object(lr.withTheme)((function(e){var t=Object(Pr.a)().t,n=Object(i.useState)({open:!1,alertType:"success",message:"",isVersionSnackbar:!1}),a=Object(Ei.a)(n,2),c=a[0],o=a[1];Object(i.useEffect)((function(){var e=yn.get(Dt);return e.subscribe(qt,s),e.subscribe(Jt,l),function(){e.unsubscribe(qt,s),e.unsubscribe(Jt,l)}}),[]);var s=function(e){var t=e[0],n=t.message,r=t.alertType,i=t.callback;o({isVersionSnackbar:!1,open:!0,message:n,alertType:r,callback:i})},l=function(e){var t=e[0],n=t.message,r=t.alertType,i=t.callback;o({open:!0,message:n,alertType:r,callback:i,isVersionSnackbar:!0})},u=c.open,d=c.message,b=(c.callback,c.alertType),h=c.isVersionSnackbar,j=Object(r.jsx)(Cc.a,{color:"primary",size:"small",onClick:function(){return location.reload(),!1},children:t("update")});return Object(r.jsxs)(_c,{children:[Object(r.jsx)(yc.a,{style:{position:"absolute",alignContent:"center"},anchorOrigin:{vertical:"bottom",horizontal:"right"},open:u,onClose:function(e,t){"timeout"===t&&o(Object(pr.a)(Object(pr.a)({},c),{},{open:!1}))},autoHideDuration:h?null:5e3,children:Object(r.jsx)(wc.a,{onClose:function(){o(Object(pr.a)(Object(pr.a)({},c),{},{open:!1}))},severity:b,style:{verticalAlign:"middle"},closeText:t("close"),action:h?j:null,children:d})}),Object(r.jsx)("div",{children:e.children})]})})),Sc=function(){yn.get(Ut)},Ic=Object(lr.withTheme)((function(e){return Sc(),Object(r.jsxs)(kc,{children:[Object(r.jsx)(Sr.a,{smDown:!0,children:Object(r.jsx)("div",{style:{position:"absolute",left:8,top:8},children:Object(r.jsx)(uc,{})})}),Object(r.jsxs)(Ir.a,{container:!0,spacing:0,alignItems:"stretch",direction:"column",children:[Object(r.jsx)(Sr.a,{smDown:!0,children:Object(r.jsx)(Ir.a,{item:!0,xs:12,children:Object(r.jsx)(_i,{})})}),Object(r.jsx)(Sr.a,{mdUp:!0,children:Object(r.jsx)(Ir.a,{item:!0,xs:12,children:Object(r.jsx)(gc,{})})}),Object(r.jsx)(Ir.a,{item:!0,xs:12,children:Object(r.jsx)(Mi,{})}),Object(r.jsx)(Sr.a,{smDown:!0,children:Object(r.jsx)(Ir.a,{item:!0,xs:12,children:Object(r.jsx)(Li,{})})}),Object(r.jsx)(Sr.a,{smDown:!0,children:Object(r.jsx)(Ir.a,{item:!0,xs:12,children:Object(r.jsx)(Mi,{})})}),Object(r.jsx)(Ir.a,{item:!0,xs:12,children:Object(r.jsx)(kr,{children:Object(r.jsx)(Ja,{})})})]})]})})),Mc=n(489),Pc=n(335),Tc=n.n(Pc),Ac=n(513),Lc=n(364),Nc=n.n(Lc),zc=n(512),Ec=n(525),Rc=Nc()((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Gc=Object(lr.withTheme)((function(e){var t=Rc(),n=Object(i.useState)({open:!1,message:""}),a=Object(Ei.a)(n,2),c=a[0],o=a[1];function s(e){var t=e[0];o({open:!0,message:t})}function l(e){o({open:!1,message:""})}Object(i.useEffect)((function(){var e=yn.get(Dt);return e.subscribe(en,s),e.subscribe(tn,l),function(){e.unsubscribe(en,s),e.unsubscribe(tn,l)}}),[]);var u=c.open,d=(c.message,Object(fr.a)({palette:{primary:{main:zc.a[500]},secondary:{main:"#42baf5"}}}));return Object(r.jsx)(lr.ThemeProvider,{theme:d,children:Object(r.jsx)(Ec.a,{open:u,className:t.backdrop,children:Object(r.jsx)(Ac.a,{color:"secondary"})})})}));function Bc(e,t){t._;var n=yn.get(Dt),r={message:s.a.t("new_version"),alertType:"info"};n.send("SHOW_NEW_VERSION_EVENT",r)}o.a.render(Object(r.jsxs)(p.a,{store:cr,children:[Object(r.jsx)(br,{}),Object(r.jsx)(Mc.a,{}),Object(r.jsx)(gr,{children:Object(r.jsxs)(i.Suspense,{fallback:"",children:[Object(r.jsx)(Ic,{}),Object(r.jsx)(Gc,{})]})})]}),document.getElementById("root")),window.onerror=function(e,t,n){return!1},function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/custom-sw.js");console.log(t),d?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):b(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):b(t,e)}))}}({onUpdate:function(e){return console.log("New Version"),Tc()(e,{render:Bc})}})}},[[452,1,2]]]);
//# sourceMappingURL=main.7389256f.chunk.js.map